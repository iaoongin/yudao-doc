(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{347:function(e,t,a){"use strict";a.r(t);var r=a(7),o=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("项目内置"),t("a",{attrs:{href:"/feature"}},[e._v("功能")]),e._v("较多，会存在一些你可能用不到的功能。一般的情况下，建议通过设置该功能对应的菜单为【"),t("strong",[e._v("禁用")]),e._v("】，实现功能的“删除”。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E8%AE%BE%E7%BD%AE%E8%8F%9C%E5%8D%95%E7%A6%81%E7%94%A8.png",alt:"设置菜单为禁用"}})]),e._v(" "),t("p",[e._v("后续，如果你又需要使用到该功能，只需要设置该功能对应的菜单为【"),t("strong",[e._v("开启")]),e._v("】即可。")]),e._v(" "),t("p",[e._v("🙂 当然，如果你希望彻底删除功能，那么就需要采用删除代码的方式。整个过程如下：")]),e._v(" "),t("p",[e._v("① 【菜单】第一步，使用管理后台的菜单管理，删除对应的菜单、按钮。"),t("br"),e._v("\n② 【数据库表】第二步，删除对应的数据库表。"),t("br"),e._v("\n③ 【后端代码】第三步，删除对应的 Controller、Service、数据库实体等后端代码；然后启动后端项目，若存在代码报错，则继续删除相关联的代码，之后如此反复，直到成功。"),t("br"),e._v("\n④ 【前端代码】第四步，删除对应的 View 和 API 等前端代码；然后启动前端项目，若存在代码报错，则继续删除相关联的代码，之后如此反复，直到成功。")]),e._v(" "),t("p",[e._v("下面，我们来举一些例子。")]),e._v(" "),t("h2",{attrs:{id:"👍-相关视频教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#👍-相关视频教程"}},[e._v("#")]),e._v(" 👍 相关视频教程")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://t.zsxq.com/07EUrZrNV",target:"_blank",rel:"noopener noreferrer"}},[e._v("从零开始 07：如何有效的删除不用的功能？"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"删除「多租户」功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除「多租户」功能"}},[e._v("#")]),e._v(" 删除「多租户」功能")]),e._v(" "),t("ul",[t("li",[e._v("对应功能的文档："),t("RouterLink",{attrs:{to:"/saas-tenant/"}},[e._v("多租户")])],1),e._v(" "),t("li",[e._v("对应的关键字是 "),t("code",[e._v("tenant")])])]),e._v(" "),t("h3",{attrs:{id:"第一步-删除菜单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步-删除菜单"}},[e._v("#")]),e._v(" 第一步，删除菜单")]),e._v(" "),t("p",[e._v("删除“租户管理“下的所有菜单，从最里层的按钮开始。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%A0%E9%99%A4%E8%8F%9C%E5%8D%95.png",alt:"删除“租户管理“菜单"}})]),e._v(" "),t("h3",{attrs:{id:"第二步-删除数据库表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步-删除数据库表"}},[e._v("#")]),e._v(" 第二步，删除数据库表")]),e._v(" "),t("p",[e._v("删除 "),t("code",[e._v("system_tenant")]),e._v(" 和 "),t("code",[e._v("system_tenant_package")]),e._v(" 表。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8.png",alt:"删除数据库表"}})]),e._v(" "),t("h3",{attrs:{id:"第三步-删除后端代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步-删除后端代码"}},[e._v("#")]),e._v(" 第三步，删除后端代码")]),e._v(" "),t("p",[e._v("① 删除 "),t("code",[e._v("yudao-module-system-api")]),e._v(" 模块的 "),t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("api/tenant")]),t("OutboundLink")],1),e._v(" 包。")]),e._v(" "),t("p",[e._v("② 删除 "),t("code",[e._v("yudao-module-system-api")]),e._v(" 模块的 "),t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/enums/ErrorCodeConstants.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("ErrorCodeConstants"),t("OutboundLink")],1),e._v(" 类中，和租户、租户套餐相关的错误码。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%A0%E9%99%A4%E9%94%99%E8%AF%AF%E7%A0%81.png",alt:"删除错误码"}})]),e._v(" "),t("p",[e._v("如果想删除的更干净，可以把 "),t("code",[e._v("system_error_code")]),e._v(" 表中，对应编号的错误码也都删除一下。")]),e._v(" "),t("p",[e._v("③ 删除 "),t("code",[e._v("yudao-module-system-biz")]),e._v(" 模块的如下包：")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/api/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("api/tenant")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("controller/admin/tenant")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("service/tenant")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/test/java/cn/iocoder/yudao/module/system/service/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("test/service/tenant")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("dal/dataobject/tenant")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/mysql/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("dal/mysql/tenant")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/convert/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("convert/tenant")]),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("④ 删除 "),t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/tree/master/yudao-framework/yudao-spring-boot-starter-biz-tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("yudao-spring-boot-starter-biz-tenant")]),t("OutboundLink")],1),e._v(" 模块。")]),e._v(" "),t("p",[e._v("然后，使用 IDEA 搜索 "),t("code",[e._v("yudao-spring-boot-starter-biz-tenant")]),e._v(" 关键字，删除 Maven 中所有对它的定义与引用。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%A0%E9%99%A4Maven%E4%BE%9D%E8%B5%96.png",alt:"删除  使用"}})]),e._v(" "),t("p",[e._v("之后，使用 IDEA 刷新下 Maven 依赖。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%B7%E6%96%B0Maven%E4%BE%9D%E8%B5%96.png",alt:"租户-刷新Maven依赖"}})]),e._v(" "),t("p",[e._v("⑤ 运行 YudaoServerApplication 启动类，会报 "),t("code",[e._v("cn.iocoder.yudao.framework.tenant.core.db")]),e._v(" 不存在的错误，需要将继承 TenantBaseDO 的数据库实体，都改成继承 BaseDO 基类。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E4%BF%AE%E6%94%B9%E7%BB%A7%E6%89%BFBaseDO%E7%B1%BB.png",alt:"租户-修改继承BaseDO类"}})]),e._v(" "),t("p",[e._v("⑥ 运行 YudaoServerApplication 启动类，会报 "),t("code",[e._v("cn.iocoder.yudao.framework.tenant.core.aop")]),e._v(" 不存在的错误，需要去除对 "),t("code",[e._v("@TenantIgnore")]),e._v(" 注解的使用。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%A0%E9%99%A4@TenantIgnore%E6%B3%A8%E8%A7%A3.png",alt:"租户-删除@TenantIgnore注解"}})]),e._v(" "),t("p",[e._v("⑦ 运行 YudaoServerApplication 启动类，会报 "),t("code",[e._v("cn.iocoder.yudao.module.system.service.tenant")]),e._v(" 不存在的错误，需要去除对 TenantService 的使用。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%A0%E9%99%A4TenantService%E7%9A%84%E4%BD%BF%E7%94%A8.png",alt:"租户-删除TenantService的使用"}})]),e._v(" "),t("p",[e._v("⑧ 运行 YudaoServerApplication 启动类，会报 "),t("code",[e._v("cn.iocoder.yudao.framework.tenant.core.context")]),e._v(" 不存在的错误，需要去除对 TenantContextHolder 的使用。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E5%88%A0%E9%99%A4TenantContextHolder%E7%9A%84%E4%BD%BF%E7%94%A8.png",alt:"租户-删除TenantContextHolder的使用"}})]),e._v(" "),t("p",[e._v("⑨ 删除使用 TenantUtils 调用的地方，只删除 TenantUtils 外层，里面的逻辑需要保留！！！")]),e._v(" "),t("p",[e._v("⑩ 运行 YudaoServerApplication 启动类，终于成功了！！！")]),e._v(" "),t("p",[e._v("ps：可以将 "),t("code",[e._v("application.yaml")]),e._v(" 配置文件中，对应的 "),t("code",[e._v("yudao.tenant")]),e._v(" 配置项给进一步删除。")]),e._v(" "),t("h3",{attrs:{id:"第四步-删除前端代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第四步-删除前端代码"}},[e._v("#")]),e._v(" 第四步，删除前端代码")]),e._v(" "),t("p",[e._v("以 "),t("code",[e._v("yudao-admin-ui")]),e._v(" 为示例~")]),e._v(" "),t("p",[e._v("① 删除 View 和 API 的前端代码：")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://gitee.com/yudaocode/yudao-ui-admin-vue2/tree/master/src/views/system/tenant",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("views/system/tenant")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/yudaocode/yudao-ui-admin-vue2/tree/master/src/views/system/tenantPackage",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("views/system/tenantPackage")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/yudaocode/yudao-ui-admin-vue2/blob/master/src/api/system/tenant.js",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("api/system/tenant.js")]),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitee.com/yudaocode/yudao-ui-admin-vue2/blob/master/src/api/system/tenantPackage.js",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("api/system/tenantPackage.js")]),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("② 在 "),t("code",[e._v("yudao-admin-ui")]),e._v(" 目录下，执行 "),t("code",[e._v("npm run local")]),e._v(" 成功。访问登录页，结果访问白屏。需要清理 "),t("code",[e._v("login.vue")]),e._v(" 页，涉及 "),t("code",[e._v("tenant")]),e._v(" 关键字的代码。例如说：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E6%B8%85%E7%90%86login%E9%A1%B5%E7%9A%84%E4%BB%A3%E7%A0%81.png",alt:"清理 login.vue 的代码"}})]),e._v(" "),t("p",[e._v("刷新，成功访问登录界面。")]),e._v(" "),t("p",[e._v("③ 在 "),t("code",[e._v("yudao-admin-ui")]),e._v(" 目录下，搜索 "),t("code",[e._v("tenant")]),e._v(" 或 "),t("code",[e._v("Tenant")]),e._v(" 关键字，可进一步清理多租户的代码。例如说：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD/%E7%A7%9F%E6%88%B7-%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%B8%85%E7%90%86%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81.png",alt:"进一步清理前端代码"}})]),e._v(" "),t("h3",{attrs:{id:"第五步-测试验收"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第五步-测试验收"}},[e._v("#")]),e._v(" 第五步，测试验收")]),e._v(" "),t("p",[e._v("至此，我们已经完成了多租户的代码删除，还是蛮艰辛的~")]),e._v(" "),t("p",[e._v("后续，你可以简单测试一下，看看是不是删除代码，导致一些小问题。")]),e._v(" "),t("h2",{attrs:{id:"更多"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更多"}},[e._v("#")]),e._v(" 更多...")]),e._v(" "),t("p",[e._v("如果你有其它功能想要删除，可以在 "),t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("Issue"),t("OutboundLink")],1),e._v(" 留言，可以不断补充到该文档。")])])}),[],!1,null,null,null);t.default=o.exports}}]);