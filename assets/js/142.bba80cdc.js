(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{471:function(t,s,a){"use strict";a.r(s);var e=a(7),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("AI 绘画，基于 LLM 大模型，实现使用文本生成图片的功能。目前接入的是：")]),t._v(" "),s("ul",[s("li",[t._v("OpenAI 的 DALL 模型")]),t._v(" "),s("li",[t._v("StabilityAI 的 Stable Diffusion 模型")]),t._v(" "),s("li",[t._v("Midjourney 的 Midjourney 模型")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%BB%98%E7%94%BB/%E7%BB%98%E7%94%BB.png",alt:"AI 绘画"}})]),t._v(" "),s("p",[t._v("整个功能，涉及到 3 个表：")]),t._v(" "),s("ul",[s("li",[t._v("【配置】"),s("code",[t._v("ai_api_key")]),t._v("：API 秘钥表")]),t._v(" "),s("li",[t._v("【配置】"),s("code",[t._v("ai_model")]),t._v("：模型表")]),t._v(" "),s("li",[t._v("【绘画】"),s("code",[t._v("ai_image")]),t._v("：绘画记录表")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("补充说明：")]),t._v(" "),s("p",[s("code",[t._v("ai_api_key")]),t._v("、"),s("code",[t._v("ai_model")]),t._v(" 已经在 "),s("RouterLink",{attrs:{to:"/ai/build/"}},[t._v("《功能开启》")]),t._v(" 讲解，就不重复赘述。")],1)]),t._v(" "),s("p",[t._v("下面，我们逐个表进行介绍，这个过程中也会讲讲对应的功能。")]),t._v(" "),s("h2",{attrs:{id:"_1-前置准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-前置准备"}},[t._v("#")]),t._v(" 1. 前置准备")]),t._v(" "),s("p",[t._v("你想使用哪个模型绘画，可以参考对应的文档，进行配置：")]),t._v(" "),s("ul",[s("li",[t._v("通义千问的万象模型："),s("a",{attrs:{href:"/ai/tongyi"}},[t._v("《【模型接入】通义千问》")])]),t._v(" "),s("li",[t._v("文心一言的 ernie_Vilg 模型："),s("a",{attrs:{href:"/ai/yiyan"}},[t._v("《【模型接入】文心一言》")])]),t._v(" "),s("li",[t._v("智谱 GLM 的 CogView 模型："),s("a",{attrs:{href:"/ai/glm"}},[t._v("《【模型接入】智谱 GLM》")])]),t._v(" "),s("li",[t._v("硅基流动的图片模型："),s("a",{attrs:{href:"/ai/siliconflow"}},[t._v("《【模型接入】硅基流动》")])]),t._v(" "),s("li",[t._v("OpenAI 的 DALL 模型："),s("a",{attrs:{href:"/ai/openai"}},[t._v("《【模型接入】OpenAI》")])]),t._v(" "),s("li",[t._v("StabilityAI 的 Stable Diffusion 模型："),s("a",{attrs:{href:"/ai/stable-diffusion"}},[t._v("《【模型接入】Stable Diffusion》")])]),t._v(" "),s("li",[t._v("Midjourney 的 Midjourney 模型："),s("a",{attrs:{href:"/ai/midjourney"}},[t._v("《【模型接入】Midjourney》")])])]),t._v(" "),s("p",[t._v("另外，星火等模型，也可以用来绘画，后续会看情况接入！")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("友情提示：")]),t._v(" "),s("p",[t._v("一般情况下，建议先使用 "),s("a",{attrs:{href:"/ai/tongyi"}},[t._v("《【模型接入】通义千问》")]),t._v(" 模块，因为免费送了一些 tokens，可以先体验一下。")])]),t._v(" "),s("h2",{attrs:{id:"_2-绘画记录表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-绘画记录表"}},[t._v("#")]),t._v(" 2. 绘画记录表")]),t._v(" "),s("p",[s("code",[t._v("ai_image")]),t._v("：绘画记录表，用户每发起一次“文本生成图片”，都会记录一条记录。")]),t._v(" "),s("h3",{attrs:{id:"_2-1-表结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-表结构"}},[t._v("#")]),t._v(" 2.1 表结构")]),t._v(" "),s("blockquote",[s("p",[t._v("省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段")])]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("ai_image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("user_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("public_status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'是否发布'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("platform"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'平台'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'模型'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'提示词'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'图片宽度'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'图片高度'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" json "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'绘制参数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'绘画状态'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("pic_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'图片地址'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("error_message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'错误信息'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("task_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_0900_bin "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'任务编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("buttons"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_0900_bin "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mj buttons 按钮'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("131")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AI 绘画表'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("① "),s("code",[t._v("user_id")]),t._v(" 字段：对应 "),s("code",[t._v("system_users")]),t._v(" 表的 "),s("code",[t._v("id")]),t._v(" 字段，表示哪个用户生成的图片。")]),t._v(" "),s("p",[s("code",[t._v("public_status")]),t._v(" 字段：表示是否发布，默认为 "),s("code",[t._v("false")]),t._v(" 不发布（不公开）。管理员可以在后台操作，设置某个图片为发布（公开）。")]),t._v(" "),s("p",[t._v("② "),s("code",[t._v("platform")]),t._v(" 字段：表示平台，对应 AiPlatformEnum 枚举，目前支持多个 AI 大模型。")]),t._v(" "),s("p",[s("code",[t._v("model")]),t._v(" 字段：表示模型标识，对应不同的平台的模型标识，例如说 OpenAI 的 "),s("code",[t._v("dall-e-3")]),t._v("、"),s("code",[t._v("dall-e-2")]),t._v("，StabilityAI 的 "),s("code",[t._v("stable-diffusion-v1-6")]),t._v(" 等等。")]),t._v(" "),s("p",[t._v("③ "),s("code",[t._v("prompt")]),t._v(" 字段：表示提示词，用户输入的文本。")]),t._v(" "),s("p",[s("code",[t._v("width")]),t._v("、"),s("code",[t._v("height")]),t._v(" 字段：表示图片的宽度、高度。")]),t._v(" "),s("p",[s("code",[t._v("options")]),t._v(" 字段：表示绘制参数，JSON 格式，因为不同平台有不同的参数。例如说：OpenAI 的 OpenAiImageOptions、StabilityAI 的 StabilityAiImageOptions 拓展参数。")]),t._v(" "),s("p",[t._v("④ "),s("code",[t._v("status")]),t._v(" 字段：表示绘画状态，对应 AiImageStatusEnum 枚举，目前有 10 进行中、20 生成成功、30 生成失败。因为绘图比较耗时，所以它的整体流程是：")]),t._v(" "),s("ul",[s("li",[t._v("用户发起绘画请求，先插入一条状态为 10 进行中的 "),s("code",[t._v("ai_image")]),t._v(" 记录")]),t._v(" "),s("li",[t._v("后端异步调用 AI 大模型，生成图片。生成成功后，更新状态为 20 生成成功")]),t._v(" "),s("li",[t._v("前端轮询查询，如果状态为 20 生成成功，就显示图片")])]),t._v(" "),s("p",[s("code",[t._v("pic_url")]),t._v(" 字段：表示图片地址，生成成功后，会把图片地址存储在这里。")]),t._v(" "),s("p",[s("code",[t._v("error_message")]),t._v(" 字段：表示错误信息，生成失败后，会把错误信息存储在这里。")]),t._v(" "),s("p",[t._v("⑤ "),s("code",[t._v("task_id")]),t._v(" 字段：Midjourney 的生成图片是异步的，所以需要一个任务编号，用来查询生成状态。")]),t._v(" "),s("p",[s("code",[t._v("buttons")]),t._v(" 字段：Midjourney 生成图片后，会返回一些按钮，用来操作图片。这个字段存储这些按钮。")]),t._v(" "),s("h3",{attrs:{id:"_2-2-管理后台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-管理后台"}},[t._v("#")]),t._v(" 2.2 管理后台")]),t._v(" "),s("p",[t._v("① 前端对应 [AI 大模型 -> AI 绘图] 菜单，对应 "),s("code",[t._v("yudao-ui-admin-vue3")]),t._v(" 项目的 "),s("code",[t._v("@/views/ai/image/index")]),t._v(" 目录，提供给普通用户使用，生成图片。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%BB%98%E7%94%BB/%E7%BB%98%E7%94%BB.png",alt:"绘画"}})]),t._v(" "),s("p",[t._v("它的后端 HTTP 接口，由 "),s("code",[t._v("yudao-module-ai")]),t._v(" 模块的 "),s("code",[t._v("image")]),t._v(" 包的 AiImageController 实现。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("最最最关键的代码！！！大家可以重点看看！！！")]),t._v(" "),s("p",[t._v("AiImageController 提供的 "),s("code",[t._v("#drawImage(...)")]),t._v(" 生成图片接口。")]),t._v(" "),s("p",[t._v("它的内部，调用 Spring AI 的 ImageModel 来实现大模型的调用。")])]),t._v(" "),s("p",[t._v("另外，通义千问、文心一言、智谱等模型的绘图，在【其它】里面使用。TODO 芋艿：重新截图")]),t._v(" "),s("p",[t._v("② 前端对应 [AI 大模型 -> 控制台 -> 绘图管理] 菜单，对应 "),s("code",[t._v("yudao-ui-admin-vue3")]),t._v(" 项目的 "),s("code",[t._v("@/views/ai/image/mananger")]),t._v(" 目录，提供给管理员使用，查看绘画记录。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%BB%98%E7%94%BB/%E7%BB%98%E5%9B%BE%E7%AE%A1%E7%90%86.png",alt:"绘画管理"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);