(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{436:function(t,s,a){"use strict";a.r(s);var e=a(7),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-表结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-表结构"}},[t._v("#")]),t._v(" 1. 表结构")]),t._v(" "),s("p",[t._v("购物车表，由 "),s("code",[t._v("yudao-module-trade-biz")]),t._v(" 后端模块的 "),s("code",[t._v("cart")]),t._v(" 包实现。表结构如下：")]),t._v(" "),s("blockquote",[s("p",[t._v("省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段")])]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("trade_cart"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'编号，唯一自增。'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("user_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("spu_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'商品 SPU 编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("sku_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'商品 SKU 编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'商品购买数量'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("selected"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'是否选中'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USING")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BTREE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("70")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" utf8mb4_general_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'购物车的商品信息'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("注意，它存储的是购物项，用户添加了多个商品 SKU 则会有多条记录。字段可以分成三类：")]),t._v(" "),s("ul",[s("li",[t._v("① "),s("code",[t._v("user_id")]),t._v(" 字段：对应的用户编号。")]),t._v(" "),s("li",[t._v("② "),s("code",[t._v("spu_id")]),t._v("、"),s("code",[t._v("sku_id")]),t._v(" 字段：商品 SPU、SKU 相关信息。")]),t._v(" "),s("li",[t._v("③ "),s("code",[t._v("count")]),t._v("、"),s("code",[t._v("selected")]),t._v(" 字段：购买数量和选中状态。相同商品 SKU 被多次添加到购物车时，只会记录一条，"),s("code",[t._v("count")]),t._v(" 数量进行累加，直到被下单。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("疑问：为什么不使用 Redis 存储购物车？")]),t._v(" "),s("p",[t._v("MySQL 实现简单易懂，性能足够满足绝大多数公司。目前，市面上主流的电商开源项目都使用 MySQL 存储购物车信息。它有如下三点好处：")]),t._v(" "),s("ul",[s("li",[t._v("数据分析。例如，哪些商品被添加到购物车很多，但是很少被下单，实现转换率漏斗")]),t._v(" "),s("li",[t._v("业务拓展。例如，卖家基于买家购物车的商品信息，进行回访，促发购买")]),t._v(" "),s("li",[t._v("用户体验。缓存总会过期，可能买家目前仅仅是添加到购物车，N 天后会进行购买")])]),t._v(" "),s("p",[t._v("当然，如果你真的希望使用 Redis 实现购物车，推荐阅读 "),s("a",{attrs:{href:"http://skrshop.tech/#/src/shopping/cart?id=%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%9c%8d%e5%8a%a1",target:"_blank",rel:"noopener noreferrer"}},[t._v("《购物车服务》"),s("OutboundLink")],1),t._v(" 文档。")])]),t._v(" "),s("h2",{attrs:{id:"_2-管理后台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-管理后台"}},[t._v("#")]),t._v(" 2. 管理后台")]),t._v(" "),s("p",[t._v("暂时没有对应菜单，可以查询 "),s("code",[t._v("trade_cart")]),t._v(" 表实现。")]),t._v(" "),s("p",[t._v("因为它采用 MySQL 实现存储，所以实现还是比较简单的。如果是 Redis 的话，可能条件 + 分页查询就比较复杂了。")]),t._v(" "),s("h2",{attrs:{id:"_3-移动端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-移动端"}},[t._v("#")]),t._v(" 3. 移动端")]),t._v(" "),s("h3",{attrs:{id:"_3-1-添加购物车"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-添加购物车"}},[t._v("#")]),t._v(" 3.1 添加购物车")]),t._v(" "),s("p",[t._v("在商品详情页，选择完商品 SKU 后，可点击「加入购物车」按钮，实现添加购物车功能。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E5%95%86%E5%9F%8E%E6%89%8B%E5%86%8C/%E8%B4%AD%E7%89%A9%E8%BD%A6/%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E6%B7%BB%E5%8A%A0%E8%B4%AD%E7%89%A9%E8%BD%A6.png",alt:"添加购物车"}})]),t._v(" "),s("h3",{attrs:{id:"_3-2-购物车列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-购物车列表"}},[t._v("#")]),t._v(" 3.2 购物车列表")]),t._v(" "),s("p",[t._v("对应 uni-app 底部的 [购物车] 导航，对应 "),s("code",[t._v("yudao-mall-uniapp")]),t._v(" 项目的 "),s("code",[t._v("pages/index/cart.vue")]),t._v(" 页面。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E5%95%86%E5%9F%8E%E6%89%8B%E5%86%8C/%E8%B4%AD%E7%89%A9%E8%BD%A6/%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8.png",alt:"购物车列表"}})]),t._v(" "),s("p",[t._v("后续，点击「去结算」按钮，即可进入下单流程。")])])}),[],!1,null,null,null);s.default=n.exports}}]);