(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{340:function(t,a,e){"use strict";e.r(a);var r=e(7),s=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("项目使用 Swagger 实现 RESTful API 的接口文档，提供两种解决方案：")]),t._v(" "),a("p",[t._v("*【推荐】 "),a("a",{attrs:{href:"http://mtw.so/62me9n",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apifox"),a("OutboundLink")],1),t._v("：强大的 API 工具，支持 API 文档、API 调试、API Mock、API 自动化测试")]),t._v(" "),a("ul",[a("li",[t._v("Knife4j：简易的 API 工具，仅支持 API 文档、API 调试")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("为什么选择 Swagger 呢？")]),t._v(" "),a("p",[t._v("Swagger 通过 Java 注解实现 API 接口文档的编写。相比使用 Java 注释的方式，注解提供更加规范的接口定义方式，开发体验更好。")]),t._v(" "),a("p",[t._v("如果你没有学习 Swagger，可以阅读 "),a("a",{attrs:{href:"https://www.iocoder.cn/Spring-Boot/Swagger/?yudao",target:"_blank",rel:"noopener noreferrer"}},[t._v("《芋道 Spring Boot API 接口文档 Swagger 入门 》"),a("OutboundLink")],1),t._v(" 文章。")])]),t._v(" "),a("h2",{attrs:{id:"_1-apifox-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-apifox-使用"}},[t._v("#")]),t._v(" 1. Apifox 使用")]),t._v(" "),a("p",[t._v("本小节，我们来将项目中的 API 接口，一键导入到 Apifox 中，并使用它发起一次 API 的调用。")]),t._v(" "),a("h3",{attrs:{id:"_1-1-下载工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-下载工具"}},[t._v("#")]),t._v(" 1.1 下载工具")]),t._v(" "),a("p",[t._v("点击 "),a("a",{attrs:{href:"http://mtw.so/62me9n",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apifox"),a("OutboundLink")],1),t._v(" 首页，下载对应的 Apifox 桌面版。如下图所示：")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("为什么要下载 Apifox 桌面版？")]),t._v(" "),a("p",[t._v("艿艿已经卸载 Postman，使用 Apifox 进行替代。国产软件，yyds 永远滴神！")]),t._v(" "),a("p",[t._v("国内很多互联网公司，包括百度、阿里、腾讯、字节跳动等等在内，都在使用 Apifox 作为 API 工具。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/01.png",alt:"Apifox 下载"}})]),t._v(" "),a("p",[t._v("解压后，双击进行安装即可。黑色界面，非常酷炫。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/02.png",alt:"Apifox 界面"}})]),t._v(" "),a("h3",{attrs:{id:"_1-2-api-导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-api-导入"}},[t._v("#")]),t._v(" 1.2 API 导入")]),t._v(" "),a("p",[t._v("① 先点击「示例项目」，再点击「+」按钮，选择「导入」选项。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/03.png",alt:"Apifox 界面 —— 导入"}})]),t._v(" "),a("p",[t._v("② 先选择「URL 导入」按钮，填写 Swagger 数据 URL 为 "),a("code",[t._v("http://127.0.0.1:48081/v3/api-docs")]),t._v(" 。如果失败，则可以尝试 "),a("code",[t._v("http://127.0.0.1:48080/v3/api-docs/all")]),t._v(" 解决。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/04.png",alt:"Apifox 界面 —— Swagger"}})]),t._v(" "),a("p",[t._v("③ 先点击「提交」按钮，再点击「确认导入」按钮，完成 API 接口的导入。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/05.png",alt:"Apifox 界面 —— Swagger"}})]),t._v(" "),a("p",[t._v("④ 导入完成后，点击「接口管理」按钮，可以查看到 API 列表。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/06.png",alt:"Apifox 界面 —— 接口管理"}})]),t._v(" "),a("h3",{attrs:{id:"_1-3-api-调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-api-调试"}},[t._v("#")]),t._v(" 1.3 API 调试")]),t._v(" "),a("p",[t._v("① 先点击右上角「请选择环境」，再点击「管理环境」选项，填写测试环境的地址为 "),a("code",[t._v("http://127.0.0.1:48080")]),t._v("，并进行保存。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/07.png",alt:"Apifox 界面 —— 管理环境"}})]),t._v(" "),a("p",[t._v("② 点击「管理后台 —— 认证」的「使用账号密码登录」接口，查看该 API 接口的定义。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/08.png",alt:"Apifox 界面 —— 认证"}})]),t._v(" "),a("p",[t._v("③ 点击「运行」按钮，填写 Headers 的 "),a("code",[t._v("tenant-id")]),t._v(" 为 1，再点击 Body 的「自动生成」按钮，最后点击「发送」按钮。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/09.png",alt:"Apifox 界面 —— 认证"}})]),t._v(" "),a("p",[t._v("注意，登录接口不要填写 "),a("code",[t._v("socialType")]),t._v("、"),a("code",[t._v("socialCode")]),t._v("、"),a("code",[t._v("socialState")]),t._v(" 这三个参数，它们是三方登录的参数。一定要去掉，不然会报错噢！")]),t._v(" "),a("h3",{attrs:{id:"_1-4-常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-常见问题"}},[t._v("#")]),t._v(" 1.4 常见问题")]),t._v(" "),a("p",[t._v("问题 ①：分页 GET 请求时，如果有 "),a("code",[t._v("createTime")]),t._v(" 这种时间类型的数组参数，会报错。如下图所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/Apifox%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%981.png",alt:"Apifox 常见问题 1"}})]),t._v(" "),a("p",[t._v("答：把 "),a("code",[t._v("createTime")]),t._v(" 左右两边的 "),a("code",[t._v("[]")]),t._v(" 去掉，即可解决。")]),t._v(" "),a("h2",{attrs:{id:"_2-knife4j-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-knife4j-使用"}},[t._v("#")]),t._v(" 2. Knife4j 使用")]),t._v(" "),a("h3",{attrs:{id:"_2-1-如何使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-如何使用"}},[t._v("#")]),t._v(" 2.1 如何使用？")]),t._v(" "),a("p",[t._v("浏览器访问 "),a("a",{attrs:{href:"http://127.0.0.1:48080/doc.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:48080/doc.html"),a("OutboundLink")],1),t._v(" 地址，使用 Knife4j 查看 API 接口文档。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/21.png",alt:"Knife4j 界面"}})]),t._v(" "),a("p",[t._v("① 点击任意一个接口，进行接口的调用测试。这里，使用「管理后台 - 用户个中心」的“获得登录用户信息”举例子。")]),t._v(" "),a("p",[t._v("② 点击左侧「调试」按钮，并将请求头部的 "),a("code",[t._v("header-id")]),t._v(" 和 "),a("code",[t._v("Authorization")]),t._v(" 勾选上。")]),t._v(" "),a("p",[t._v("其中，"),a("code",[t._v("header-id")]),t._v(" 为租户编号，"),a("code",[t._v("Authorization")]),t._v(" 的 "),a("code",[t._v('"Bearer test"')]),t._v(" 后面为用户编号（模拟哪个用户操作）。")]),t._v(" "),a("p",[t._v("如果不勾选，会出现 "),a("code",[t._v('"请求的租户标识未传递，请进行排查"')]),t._v(" 或 "),a("code",[t._v('"账号未登录"')]),t._v(" 错误。")]),t._v(" "),a("p",[t._v("③ 点击「发送」按钮，即可发起一次 API 的调用。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/Knife4j%E8%B0%83%E7%94%A8.png",alt:"Knife4j 调试"}})]),t._v(" "),a("h3",{attrs:{id:"_2-2-如何开启登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-如何开启登录"}},[t._v("#")]),t._v(" 2.2 如何开启登录？")]),t._v(" "),a("p",[t._v("生产环境下，建议 Knife4j 接口界面开启“安全认证”的功能，避免出现安全事故。")]),t._v(" "),a("p",[t._v("只需要在 "),a("code",[t._v("knife4j.basic")]),t._v(" 配置项中，额外添加 Basic Auth 认证即可，如下所示：")]),t._v(" "),a("div",{staticClass:"language-YAML extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("knife4j")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("basic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Basic 认证用户名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" admin "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Basic 认证密码")]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-swagger-技术组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-swagger-技术组件"}},[t._v("#")]),t._v(" 3. Swagger 技术组件")]),t._v(" "),a("p",[t._v("① 在 "),a("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/pom.xml",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("yudao-spring-boot-starter-web")]),a("OutboundLink")],1),t._v(" 技术组件的 "),a("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-framework/yudao-spring-boot-starter-web/src/main/java/cn/iocoder/yudao/framework/swagger/package-info.java",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("swagger")]),a("OutboundLink")],1),t._v(" 包，实现了对 Swagger 的封装。")]),t._v(" "),a("p",[t._v("② 如果想要禁用 Swagger 功能，可通过 "),a("code",[t._v("springdoc.api-docs.enable")]),t._v(" 配置项为 "),a("code",[t._v("false")]),t._v("。一般情况下，建议 prod 生产环境进行禁用，避免发生安全问题。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/Swagger%E5%85%B3%E9%97%AD.png",alt:"Swagger 关闭"}})]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("友情提示：除了通过 enable 进行关闭外，更建议的是通过 knife4j 提供的 `knife4j.production = true` 来实现")]),t._v(" "),a("ul",[a("li",[t._v("可见星球："),a("a",{attrs:{href:"https://wx.zsxq.com/group/88858522214142/topic/4844122558542458",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://wx.zsxq.com/group/88858522214142/topic/4844122558542458"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("可见文档："),a("a",{attrs:{href:"https://doc.xiaominfo.com/docs/features/accessControl",target:"_blank",rel:"noopener noreferrer"}},[t._v("《Knife4j 文档 —— 访问权限控制》"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=s.exports}}]);