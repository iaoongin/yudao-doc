(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{509:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("本章节，介绍项目的邮件功能。它在管理后台有三个菜单，分别是：")]),t._v(" "),s("p",[s("strong",[t._v("① 邮箱账号：配置邮件的发送账号")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E6%BC%94%E7%A4%BA-%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7.png",alt:"邮箱账号"}})]),t._v(" "),s("p",[s("strong",[t._v("② 邮件模版：管理邮件的内容模版")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E6%BC%94%E7%A4%BA-%E9%82%AE%E4%BB%B6%E6%A8%A1%E7%89%88.png",alt:"邮件模版"}})]),t._v(" "),s("p",[s("strong",[t._v("③ 邮件记录：查看邮件的发送记录")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E6%BC%94%E7%A4%BA-%E9%82%AE%E4%BB%B6%E8%AE%B0%E5%BD%95.png",alt:"邮件记录"}})]),t._v(" "),s("h2",{attrs:{id:"_1-表结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-表结构"}},[t._v("#")]),t._v(" 1. 表结构")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E8%A1%A8%E7%BB%93%E6%9E%84.png",alt:"表结构"}})]),t._v(" "),s("h2",{attrs:{id:"_2-实现原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-实现原理"}},[t._v("#")]),t._v(" 2. 实现原理")]),t._v(" "),s("p",[t._v("邮件功能提供统一的 API 给其它模块，使它们可以快速实现发送邮件的功能，无需关心不同邮件平台的具体对接。")]),t._v(" "),s("p",[t._v("邮件采用异步发送，基于 "),s("a",{attrs:{href:"/message-queue/event"}},[t._v("消息队列")]),t._v("，如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.png",alt:"实现原理"}})]),t._v(" "),s("ul",[s("li",[t._v("前端代码："),s("a",{attrs:{href:"https://github.com/yudaocode/yudao-ui-admin-vue2/blob/master/src/views/system/mail/",target:"_blank",rel:"noopener noreferrer"}},[t._v("views/system/mail"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("后端代码："),s("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/controller/admin/mail/",target:"_blank",rel:"noopener noreferrer"}},[t._v("controller/admin/mail"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("最终使用 Hutool 的 "),s("a",{attrs:{href:"https://apidoc.gitee.com/dromara/hutool/cn/hutool/extra/mail/MailUtil.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MailUtil"),s("OutboundLink")],1),t._v(" 发送邮件。")]),t._v(" "),s("h2",{attrs:{id:"_3-邮箱配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-邮箱配置"}},[t._v("#")]),t._v(" 3. 邮箱配置")]),t._v(" "),s("p",[t._v("本小节，讲解如何配置邮件功能，整个过程如下：")]),t._v(" "),s("ol",[s("li",[t._v("新建一个邮箱【账号】，配置邮件的发送账号")]),t._v(" "),s("li",[t._v("新建一个邮件【模版】，配置邮件的内容模版")]),t._v(" "),s("li",[t._v("测试该邮件模板，查看对应的邮件【日志】，确认是否发送成功")])]),t._v(" "),s("h3",{attrs:{id:"_3-1-新建邮箱账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-新建邮箱账号"}},[t._v("#")]),t._v(" 3.1 新建邮箱账号")]),t._v(" "),s("p",[t._v("① 点击 [系统管理 -> 消息中心 -> 邮件管理 -> 邮箱账号] 菜单，查看邮箱账号的列表。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E6%BC%94%E7%A4%BA-%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7.png",alt:"邮箱账号"}})]),t._v(" "),s("p",[t._v("② 点击 [新增] 按钮，添加一个邮箱账号，并填写信息如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE-%E6%96%B0%E5%BB%BA%E9%82%AE%E7%AE%B1%E8%B4%A6%E5%8F%B7.png",alt:"新增邮箱账号"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("友情提示：")]),t._v(" "),s("p",[t._v("邮件发送基于 "),s("a",{attrs:{href:"https://baike.baidu.com/item/SMTP/175887",target:"_blank",rel:"noopener noreferrer"}},[t._v("SMTP"),s("OutboundLink")],1),t._v(" 协议实现，需要开通账号的 STMP 服务。例如说：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE-SMTP%E6%9C%8D%E5%8A%A1.png",alt:"网易 163 邮箱的 SMTP 服务"}})]),t._v(" "),s("p",[t._v("不同邮件平台的 SMTP 配置，可见 "),s("a",{attrs:{href:"#_5-%E9%82%AE%E7%AE%B1%E5%B9%B3%E5%8F%B0%E9%99%84%E5%BD%95"}},[t._v("「5. 邮箱平台附录」")]),t._v(" 小节。")])]),t._v(" "),s("p",[t._v("③ 新增完成后，确认你的邮箱账号是否可以发送邮件，可通过如下代码：")]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hutool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extra"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailAccount")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hutool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extra"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailUtil")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testDemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailAccount")]),t._v(" mailAccount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailAccount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//                .setFrom("奥特曼 <ydym_test@163.com>")')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFrom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ydym_test@163.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 邮箱地址")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"smtp.163.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("465")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSslEnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SMTP 服务器")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAuth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ydym_test@163.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"WBZTEINMIFVRYSOE"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 登录账号密码")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" messageId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mailAccount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7685413@qq.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"主题"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"内容"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"发送结果："')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" messageId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-2-新建邮箱模版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-新建邮箱模版"}},[t._v("#")]),t._v(" 3.2 新建邮箱模版")]),t._v(" "),s("p",[t._v("① 点击 [系统管理 -> 消息中心 -> 邮箱管理 -> 邮件模板] 菜单，查看邮件模板的列表。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E6%BC%94%E7%A4%BA-%E9%82%AE%E4%BB%B6%E6%A8%A1%E7%89%88.png",alt:"邮件模版"}})]),t._v(" "),s("p",[t._v("② 点击 [新增] 按钮，选择刚创建的邮箱账号，并填写信息如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE-%E6%96%B0%E5%A2%9E%E9%82%AE%E4%BB%B6%E6%A8%A1%E7%89%88.png",alt:"邮件模板的新增"}})]),t._v(" "),s("ul",[s("li",[t._v("邮箱账号：发送该邮件模板时，使用的邮件账号，即使用哪个邮箱进行发送邮件")]),t._v(" "),s("li",[t._v("模版编号：邮件模板的唯一标识，使用邮件 API 时，通过它标识使用的邮件模板")]),t._v(" "),s("li",[t._v("发件人名称：发送邮件显示的发件人名字")]),t._v(" "),s("li",[t._v("模板内容：邮件模板的内容，使用 "),s("code",[t._v("{var}")]),t._v(" 作为占位符，例如说 "),s("code",[t._v("{name}")]),t._v("、"),s("code",[t._v("{code}")]),t._v(" 等")]),t._v(" "),s("li",[t._v("开启状态：邮件模板被禁用时，该邮件模板将不发送邮件，只记录邮件日志")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("疑问：为什么设计邮件模板的功能？")]),t._v(" "),s("p",[t._v("在一些场景下，产品会希望修改发送邮件的标题、内容，甚至邮箱账号，此时只需要修改邮件模版的对应属性，无需重启应用。")])]),t._v(" "),s("h3",{attrs:{id:"_3-3-查看邮件日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-查看邮件日志"}},[t._v("#")]),t._v(" 3.3 查看邮件日志")]),t._v(" "),s("p",[t._v("① 点击 [测试] 按钮，输入测试的收件邮箱地址，进行该邮件模板的模拟发送。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE-%E6%B5%8B%E8%AF%95%E9%82%AE%E4%BB%B6.png",alt:"测试邮件"}})]),t._v(" "),s("p",[t._v("② 打开收件邮箱，查看邮件是否发送成功。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE-%E6%94%B6%E4%BB%B6%E7%AE%B1.png",alt:"邮件箱"}})]),t._v(" "),s("p",[t._v("③ 点击 [系统管理 -> 消息中心 -> 邮箱管理 -> 邮件日志] 采单，可以查看到每条邮件的发送状态。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE-%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E6%97%A5%E5%BF%97.png",alt:"邮件发送日志"}})]),t._v(" "),s("h2",{attrs:{id:"_4-邮件发送"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-邮件发送"}},[t._v("#")]),t._v(" 4. 邮件发送")]),t._v(" "),s("h3",{attrs:{id:"_4-1-mailsendapi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-mailsendapi"}},[t._v("#")]),t._v(" 4.1 MailSendApi")]),t._v(" "),s("p",[s("a",{attrs:{href:"#_3-%E9%82%AE%E7%AE%B1%E9%85%8D%E7%BD%AE"}},[t._v("邮箱配置")]),t._v("完成后，可使用 "),s("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/mail/MailSendApi.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("MailSendApi"),s("OutboundLink")],1),t._v(" 进行邮件的发送，支持多种用户类型。它的方法如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE/%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81-MailSendApi.png",alt:"MailSendApi"}})]),t._v(" "),s("h3",{attrs:{id:"_4-2-接入示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-接入示例"}},[t._v("#")]),t._v(" 4.2 接入示例")]),t._v(" "),s("p",[t._v("以 "),s("code",[t._v("yudao-module-infra")]),t._v(" 模块，需要发邮件为例子，讲解 SmsCodeApi 的使用。")]),t._v(" "),s("p",[t._v("① 在 "),s("code",[t._v("yudao-module-infra-biz")]),t._v(" 模块的 "),s("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/pom.xml",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("pom.xml")]),s("OutboundLink")],1),t._v(" 引入 "),s("code",[t._v("yudao-module-system-api")]),t._v(" 依赖，如所示：")]),t._v(" "),s("div",{staticClass:"language-XML extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("cn.iocoder.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yudao-module-system-api"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${revision}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("② 在代码中注入 SmsCodeApi Bean，并调用发送邮件的方法。代码如下：")]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestDemoServiceImpl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestDemoService")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0. 注入 MailSendApi Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Resource")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailSendApi")]),t._v(" mailSendApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendDemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 准备参数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" userId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 示例中写死，你可以改成你业务中的 userId 噢")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" templateCode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test_01"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 邮件模版，记得在【邮箱管理】中配置噢")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" templateParams "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        templateParams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"奥特曼"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        templateParams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"变身"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 发送邮件")]),t._v("\n        mailSendApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendSingleMailToAdmin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MailSendSingleToUserReqDTO")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUserId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTemplateCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("templateCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTemplateParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("templateParams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5-邮箱平台附录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-邮箱平台附录"}},[t._v("#")]),t._v(" 5. 邮箱平台附录")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://t.zoukankan.com/kimsbo-p-10671851.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("《QQ 邮箱的 SMTP 设置》"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/qq_39933045/article/details/126957074",target:"_blank",rel:"noopener noreferrer"}},[t._v("《网易 163 邮箱的 SMTP 设置》"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/551399559",target:"_blank",rel:"noopener noreferrer"}},[t._v("《QQ 邮箱、网易邮箱、腾讯企业邮箱、网易企业邮箱的 SMTP 设置》"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);