(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{481:function(a,e,t){"use strict";t.r(e);var r=t(7),n=Object(r.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("项目基于 Spring Cloud Alibaba AI 的 "),e("a",{attrs:{href:"https://github.com/alibaba/spring-cloud-alibaba/tree/2023.x/spring-cloud-alibaba-starters",target:"_blank",rel:"noopener noreferrer"}},[e("code",[a._v("spring-cloud-alibaba-starters")]),e("OutboundLink")],1),a._v("，实现 "),e("a",{attrs:{href:"https://tongyi.aliyun.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("通义千问"),e("OutboundLink")],1),a._v(" 的接入：")]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("功能")]),a._v(" "),e("th",[a._v("模型")]),a._v(" "),e("th",[a._v("Spring AI 客户端")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[a._v("AI 对话")]),a._v(" "),e("td",[e("a",{attrs:{href:"https://help.aliyun.com/zh/dashscope/developer-reference/quick-start?spm=a2c4g.11186623.0.0.1adc77943sTgBV",target:"_blank",rel:"noopener noreferrer"}},[a._v("通义千问"),e("OutboundLink")],1)]),a._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/alibaba/spring-cloud-alibaba/blob/2023.x/spring-cloud-alibaba-starters/spring-cloud-starter-alibaba-ai/src/main/java/com/alibaba/cloud/ai/tongyi/chat/TongYiChatModel.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("TongYiChatModel"),e("OutboundLink")],1)])]),a._v(" "),e("tr",[e("td",[a._v("AI 绘画")]),a._v(" "),e("td",[e("a",{attrs:{href:"https://help.aliyun.com/zh/dashscope/developer-reference/tongyi-wanxiang/?spm=a2c4g.11186623.0.0.2f507794a1KWKV",target:"_blank",rel:"noopener noreferrer"}},[a._v("通义万象"),e("OutboundLink")],1)]),a._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/alibaba/spring-cloud-alibaba/blob/2023.x/spring-cloud-alibaba-starters/spring-cloud-starter-alibaba-ai/src/main/java/com/alibaba/cloud/ai/tongyi/image/TongYiImagesModel.java",target:"_blank",rel:"noopener noreferrer"}},[a._v("TongYiImagesModel"),e("OutboundLink")],1)])])])]),a._v(" "),e("h2",{attrs:{id:"_1-申请密钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-申请密钥"}},[a._v("#")]),a._v(" 1. 申请密钥")]),a._v(" "),e("p",[a._v("通义千问有"),e("a",{attrs:{href:"https://help.aliyun.com/document_detail/2712818.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("开源版本"),e("OutboundLink")],1),a._v("，提供包括 18 亿、70 亿、140 亿和 720亿 等多个规模的版本，所以我们可以私有化部署。")]),a._v(" "),e("p",[a._v("当然，能力更强的模型，就需要使用阿里云提供的"),e("a",{attrs:{href:"https://help.aliyun.com/document_detail/2712816.html?spm=a2c4g.2786271.0.0.4e337211cCVTAk",target:"_blank",rel:"noopener noreferrer"}},[a._v("大模型服务"),e("OutboundLink")],1),a._v("。")]),a._v(" "),e("p",[a._v("下面，我们来看看这两种方式怎么申请（部署）？")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("友情提示：")]),a._v(" "),e("p",[a._v("一般情况下，建议先采用“方式一：申请阿里云密钥”，因为阿里云提供了一定的免费额度，具体可以看 "),e("a",{attrs:{href:"https://dashscope.console.aliyun.com/billing",target:"_blank",rel:"noopener noreferrer"}},[a._v("阿里云计费管理（需要登录）"),e("OutboundLink")],1),a._v("，搜“免费额度”或者“限时免费”关键字。")])]),a._v(" "),e("h3",{attrs:{id:"_1-1-方式一-申请阿里云密钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-方式一-申请阿里云密钥"}},[a._v("#")]),a._v(" 1.1 方式一：申请阿里云密钥")]),a._v(" "),e("p",[a._v("参考 "),e("a",{attrs:{href:"https://help.aliyun.com/zh/dashscope/developer-reference/quick-start",target:"_blank",rel:"noopener noreferrer"}},[a._v("《阿里云大模型 —— 快速模型》"),e("OutboundLink")],1),a._v(" 文档，重点是“开通 DashScope 并"),e("a",{attrs:{href:"https://help.aliyun.com/zh/dashscope/developer-reference/activate-dashscope-and-create-an-api-key",target:"_blank",rel:"noopener noreferrer"}},[a._v("创建 API-KEY"),e("OutboundLink")],1),a._v("”部分，其它都不用关注。一般 1-2 分钟就可以申请完成！")]),a._v(" "),e("hr"),a._v(" "),e("p",[a._v("申请完成后，可以在我们系统的 [AI 大模型 -> 控制台 -> API 密钥] 菜单，进行密钥的配置。只需要填写“密钥”，不需要填写“自定义 API URL”（因为 Spring AI 默认官方地址）。如下图所示：")]),a._v(" "),e("p",[e("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/%E9%80%9A%E4%B9%89%E5%8D%83%E9%97%AE-%E5%AE%98%E6%96%B9.png",alt:"官方的密钥配置"}})]),a._v(" "),e("h3",{attrs:{id:"_1-2-方式二-私有化部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-方式二-私有化部署"}},[a._v("#")]),a._v(" 1.2 方式二：私有化部署")]),a._v(" "),e("p",[a._v("① 访问 "),e("a",{attrs:{href:"https://ollama.ai/download",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://ollama.ai/download"),e("OutboundLink")],1),a._v("，下载对应系统 Ollama 客户端，然后安装。")]),a._v(" "),e("p",[a._v("② 安装完成后，在命令中执行 "),e("code",[a._v("ollama run qwen2.5")]),a._v(" 命令，一键部署 "),e("a",{attrs:{href:"https://ollama.com/library/qwen",target:"_blank",rel:"noopener noreferrer"}},[a._v("通义千问开源模型"),e("OutboundLink")],1),a._v("，默认跑的是 "),e("code",[a._v("qwen:7b")]),a._v(" 模型。")]),a._v(" "),e("hr"),a._v(" "),e("p",[a._v("部署完成后，可以在我们系统的 [AI 大模型 -> 控制台 -> API 密钥] 菜单，进行密钥的配置。需要填写“密钥” + “自定义 API URL”（因为让 Spring AI 使用该地址）。如下图所示：")]),a._v(" "),e("p",[e("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/Ollama-%E5%AF%86%E9%92%A5.png",alt:"私有的密钥配置"}})]),a._v(" "),e("p",[a._v("注意：使用该方式时，后续配置模型名时，需要使用 "),e("code",[a._v("qwen2.5")]),a._v(" ！！！例如说：")]),a._v(" "),e("p",[e("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/%E9%80%9A%E4%B9%89%E5%8D%83%E9%97%AE-%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B-%E7%A7%81%E6%9C%89.png",alt:"私有的聊天模型"}})]),a._v(" "),e("h2",{attrs:{id:"_2-模型配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-模型配置"}},[a._v("#")]),a._v(" 2. 模型配置")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("友情提示：")]),a._v(" "),e("p",[a._v("目前 "),e("code",[a._v("ai_model")]),a._v(" 表中，已经预置了一些模型，可以直接使用！！！")])]),a._v(" "),e("h3",{attrs:{id:"_2-1-ai-对话"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ai-对话"}},[a._v("#")]),a._v(" 2.1 AI 对话")]),a._v(" "),e("p",[a._v("使用 "),e("RouterLink",{attrs:{to:"/ai/chat/"}},[a._v("《AI 对话》")]),a._v(" 时，需要在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，配置对应的聊天模型。")],1),a._v(" "),e("p",[a._v("模型有："),e("code",[a._v("qwen-turbo")]),a._v("、"),e("code",[a._v("qwen-max")]),a._v("、"),e("code",[a._v("qwen-max-1201")]),a._v("、"),e("code",[a._v("qwen-max-longcontext")]),a._v("、"),e("code",[a._v("qwen-plus")]),a._v(" 等等，可通过 "),e("a",{attrs:{href:"https://dashscope.console.aliyun.com/billing",target:"_blank",rel:"noopener noreferrer"}},[a._v("阿里云计费管理（需要登录）"),e("OutboundLink")],1),a._v(" 查看。")]),a._v(" "),e("p",[a._v("注意，每个模型标识的 "),e("code",[a._v("max_tokens")]),a._v("（回复数 Token 数）是不同的，可查看 "),e("a",{attrs:{href:"https://help.aliyun.com/zh/dashscope/developer-reference/api-details",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文档"),e("OutboundLink")],1),a._v(" 介绍，一般是 1500 或 2000。不确定的话，就填写 1500 先~跑通之后，再网上查查。")]),a._v(" "),e("h3",{attrs:{id:"_2-2-ai-绘图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ai-绘图"}},[a._v("#")]),a._v(" 2.2 AI 绘图")]),a._v(" "),e("p",[a._v("使用 "),e("RouterLink",{attrs:{to:"/ai/image/"}},[a._v("《AI 绘图》")]),a._v(" 时，需要在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，配置对应的图像模型。")],1),a._v(" "),e("p",[a._v("模型有："),e("code",[a._v("wanx-v1")]),a._v("、"),e("code",[a._v("wanx-sketch-to-image-v1")]),a._v(" 等等。")]),a._v(" "),e("h2",{attrs:{id:"_3-如何使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-如何使用"}},[a._v("#")]),a._v(" 3. 如何使用？")]),a._v(" "),e("p",[a._v("① 如果你的项目里需要直接通过 "),e("code",[a._v("@Resource")]),a._v(" 注入 TongYiChatModel、TongYiImageModel 等对象，需要把 "),e("code",[a._v("application.yaml")]),a._v(" 配置文件里的 "),e("code",[a._v("spring.ai.dashscope.")]),a._v(" 配置项，替换成你的！")]),a._v(" "),e("p",[a._v("ps：暂时不支持“方式二：私有化部署”。（后续会支持！）")]),a._v(" "),e("div",{staticClass:"language-YAML extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ai")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("dashscope")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通义千问")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("api-key")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" sk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("71800982914041848008480000000000")]),a._v("\n")])])]),e("p",[a._v("② 如果你希望使用 [AI 大模型 -> 控制台 -> API 密钥] 菜单的密钥配置，则可以通过 AiModelService 的 "),e("code",[a._v("#getChatModel(...)")]),a._v(" 或 "),e("code",[a._v("#getImageModel(...)")]),a._v(" 方法，获取对应的模型对象。")]),a._v(" "),e("hr"),a._v(" "),e("p",[a._v("① 和 ② 这两者的后续使用，就是标准的 Spring AI 客户端的使用，调用对应的方法即可。")]),a._v(" "),e("p",[a._v("另外，TongYiChatModelTests、TongYiImagesModelTest 里有对应的测试用例，可以参考。")])])}),[],!1,null,null,null);e.default=n.exports}}]);