(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{472:function(t,s,a){"use strict";a.r(s);var e=a(7),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("AI 知识库，基于 RAG 方式，实现 LLM 打通内部知识库。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("疑问：什么是 RAG？")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.zhihu.com/tardis/zm/art/675509396",target:"_blank",rel:"noopener noreferrer"}},[t._v("《一文读懂：大模型 RAG（检索增强生成）含高级方法》"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.promptingguide.ai/zh/techniques/rag",target:"_blank",rel:"noopener noreferrer"}},[t._v("《检索增强生成 (RAG)》"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.redhat.com/zh/topics/ai/what-is-retrieval-augmented-generation",target:"_blank",rel:"noopener noreferrer"}},[t._v("《什么是检索增强生成？》"),s("OutboundLink")],1)])])]),t._v(" "),s("p",[t._v("目前，项目中的 "),s("RouterLink",{attrs:{to:"/ai/chat/"}},[t._v("AI 聊天对话")]),t._v(" 功能，已经接入 AI 知识库，如下图所示：")],1),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%A1%88%E4%BE%8B.png",alt:"AI 知识库的案例"}})]),t._v(" "),s("p",[t._v("整个功能，涉及到 3 个表：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E8%A1%A8%E5%85%B3%E7%B3%BB%E5%9B%BE.png",alt:"表关系图"}})]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ai_knowledge")]),t._v("：AI 知识库表")]),t._v(" "),s("li",[s("code",[t._v("ai_knowledge_document")]),t._v("：AI 知识库文档表")]),t._v(" "),s("li",[s("code",[t._v("ai_knowledge_segment")]),t._v("：AI 知识库段落表")])]),t._v(" "),s("p",[t._v("下面，我们逐个表进行介绍，这个过程中也会讲讲对应的功能。")]),t._v(" "),s("h2",{attrs:{id:"_1-ai-知识库表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ai-知识库表"}},[t._v("#")]),t._v(" 1. AI 知识库表")]),t._v(" "),s("p",[s("code",[t._v("ai_knowledge")]),t._v(" 表，是 AI 知识库的主表，存储了知识库的基本信息。")]),t._v(" "),s("h3",{attrs:{id:"_1-1-表结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-表结构"}},[t._v("#")]),t._v(" 1.1 表结构")]),t._v(" "),s("blockquote",[s("p",[t._v("省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段")])]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("ai_knowledge"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'知识库名称'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("longtext")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'知识库描述'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("embedding_model_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'向量模型编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("embedding_model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'向量模型标识'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("top_k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'topK'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("similarity_threshold"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'相似度阈值'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'是否启用'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AI 知识库表'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("① "),s("code",[t._v("embedding_model_id")]),t._v(" 字段：对应 "),s("code",[t._v("ai_model")]),t._v(" 表的 "),s("code",[t._v("id")]),t._v(" 字段，表示使用的向量模型。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("友情提示：向量模型的配置，可见「附录：向量模型」小节。")])]),t._v(" "),s("p",[t._v("② "),s("code",[t._v("top_k")]),t._v(" 字段：表示检索时，返回的最大数量。")]),t._v(" "),s("p",[s("code",[t._v("similarity_threshold")]),t._v(" 字段：表示相似度阈值，超过这个值，检索才会返回。")]),t._v(" "),s("h3",{attrs:{id:"_1-2-管理后台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-管理后台"}},[t._v("#")]),t._v(" 1.2 管理后台")]),t._v(" "),s("p",[t._v("① 前端对应 [AI 大模型 -> AI 知识库] 菜单，对应 "),s("code",[t._v("yudao-ui-admin-vue3")]),t._v(" 项目的 "),s("code",[t._v("@/views/ai/knowledge/knowledge")]),t._v(" 目录，创建知识库。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93.png",alt:"AI 知识库"}})]),t._v(" "),s("p",[t._v("它的后端 HTTP 接口，由 "),s("code",[t._v("yudao-module-ai")]),t._v(" 模块的 "),s("code",[t._v("model")]),t._v(" 包的 AiKnowledgeController 实现。")]),t._v(" "),s("p",[t._v("② 点击「新建」按钮，填写知识库名称、描述、向量模型、topK、相似度阈值，点击「保存」按钮，即可创建知识库。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%96%B0%E5%BB%BA.png",alt:"AI 知识库新建"}})]),t._v(" "),s("h2",{attrs:{id:"_2-ai-知识库文档表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ai-知识库文档表"}},[t._v("#")]),t._v(" 2. AI 知识库文档表")]),t._v(" "),s("p",[s("code",[t._v("ai_knowledge_document")]),t._v(" 表，是 AI 知识库的文档表，存储了知识库的文档信息。")]),t._v(" "),s("h3",{attrs:{id:"_2-1-表结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-表结构"}},[t._v("#")]),t._v(" 2.1 表结构")]),t._v(" "),s("blockquote",[s("p",[t._v("省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段")])]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("ai_knowledge_document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("knowledge_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'知识库编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文档名称'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文件 URL'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("text")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'内容'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("content_length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'字符数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("tokens"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token 数量'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("segment_max_tokens"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'分片最大 Token 数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("retrieval_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'召回次数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'是否启用'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AI 知识库文档表'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("① "),s("code",[t._v("knowledge_id")]),t._v(" 字段：对应 "),s("code",[t._v("ai_knowledge")]),t._v(" 表的 "),s("code",[t._v("id")]),t._v(" 字段，表示属于哪个知识库。")]),t._v(" "),s("p",[t._v("② "),s("code",[t._v("url")]),t._v(" 字段：通过上传文件，新建文档时，会有文件 URL。")]),t._v(" "),s("p",[s("code",[t._v("content")]),t._v("、"),s("code",[t._v("content_length")]),t._v("、"),s("code",[t._v("tokens")]),t._v(" 字段：表示文档内容、字符数、token 数量。")]),t._v(" "),s("p",[t._v("③ "),s("code",[t._v("segment_max_tokens")]),t._v(" 字段：表示分片最大 Token 数，超过这个值，会进行分片。目前通过 Spring AI 提供的 TokenTextSplitter 进行分片。")]),t._v(" "),s("p",[t._v("④ "),s("code",[t._v("retrieval_count")]),t._v(" 字段：表示召回次数，每次检索时，会记录召回次数。")]),t._v(" "),s("h3",{attrs:{id:"_2-2-管理后台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-管理后台"}},[t._v("#")]),t._v(" 2.2 管理后台")]),t._v(" "),s("p",[t._v("① 点击“知识库”所在列的「文档」按钮，进入该知识库的文档列表，对应 "),s("code",[t._v("yudao-ui-admin-vue3")]),t._v(" 项目的 "),s("code",[t._v("@/views/ai/knowledge/knowledge")]),t._v(" 目录，如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%96%87%E6%A1%A3.png",alt:"AI 知识库文档"}})]),t._v(" "),s("p",[t._v("它的后端 HTTP 接口，由 "),s("code",[t._v("yudao-module-ai")]),t._v(" 模块的 "),s("code",[t._v("model")]),t._v(" 包的 AiKnowledgeDocumentController 实现。")]),t._v(" "),s("p",[t._v("② 点击「新建」按钮，上传文件（支持多个），不断点击「下一步」按钮，即可创建文档。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%96%87%E6%A1%A3%E6%96%B0%E5%BB%BA.png",alt:"AI 知识库文档新建"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%96%87%E6%A1%A3%E6%96%B0%E5%BB%BA2.png",alt:"AI 知识库文档新建2"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%96%87%E6%A1%A3%E6%96%B0%E5%BB%BA3.png",alt:"AI 知识库文档新建3"}})]),t._v(" "),s("p",[t._v("完成后，文档会被切成多个分片，之后分片使用【向量模型】进行向量化，最终存储到【向量存储】中。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("友情提示：向量存储的配置，可见「附录：向量存储」小节。")])]),t._v(" "),s("h2",{attrs:{id:"_3-ai-知识库段落表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ai-知识库段落表"}},[t._v("#")]),t._v(" 3. AI 知识库段落表")]),t._v(" "),s("p",[s("code",[t._v("ai_knowledge_segment")]),t._v(" 表，是 AI 知识库的段落表，存储了知识库的段落信息。")]),t._v(" "),s("p",[t._v("也就是说，切片一方面存储到【向量存储】中（用于“检索”），另一方面存储到 "),s("code",[t._v("ai_knowledge_segment")]),t._v(" 表中（用于“管理”）。")]),t._v(" "),s("h3",{attrs:{id:"_3-1-表结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-表结构"}},[t._v("#")]),t._v(" 3.1 表结构")]),t._v(" "),s("blockquote",[s("p",[t._v("省略 creator/create_time/updater/update_time/deleted/tenant_id 等通用字段")])]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("ai_knowledge_segment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("knowledge_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'知识库编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("document_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文档编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("text")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'分段内容'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("content_length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'字符数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("tokens"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token 数量'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("vector_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'向量库的编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("retrieval_count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'召回次数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'是否启用'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("183")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AI 知识库分段表'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("① "),s("code",[t._v("knowledge_id")]),t._v(" 字段：对应 "),s("code",[t._v("ai_knowledge")]),t._v(" 表的 "),s("code",[t._v("id")]),t._v(" 字段，表示属于哪个知识库。")]),t._v(" "),s("p",[s("code",[t._v("document_id")]),t._v(" 字段：对应 "),s("code",[t._v("ai_knowledge_document")]),t._v(" 表的 "),s("code",[t._v("id")]),t._v(" 字段，表示属于哪个文档。")]),t._v(" "),s("p",[t._v("② "),s("code",[t._v("content")]),t._v("、"),s("code",[t._v("content_length")]),t._v("、"),s("code",[t._v("tokens")]),t._v(" 字段：表示分段内容、字符数、token 数量。")]),t._v(" "),s("p",[t._v("③ "),s("code",[t._v("vector_id")]),t._v(" 字段：表示向量库的编号，对应【向量存储】中的向量编号。只做关联，不存储向量值。")]),t._v(" "),s("p",[t._v("④ "),s("code",[t._v("retrieval_count")]),t._v(" 字段：表示召回次数，每次检索时，会记录召回次数。")]),t._v(" "),s("h3",{attrs:{id:"_3-2-管理后台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-管理后台"}},[t._v("#")]),t._v(" 3.2 管理后台")]),t._v(" "),s("p",[t._v("① 点击“文档”所在列的「文档」按钮，进入该知识库的文档列表，点击「查看」按钮，即可查看文档的分段列表，对应 "),s("code",[t._v("yudao-ui-admin-vue3")]),t._v(" 项目的 "),s("code",[t._v("@/views/ai/knowledge/knowledge")]),t._v(" 目录，如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%AE%B5%E8%90%BD.png",alt:"AI 知识库段落"}})]),t._v(" "),s("p",[t._v("② 除了上述文档的方式，我们也可以点击「新建」或者「编辑」按钮，手动创建或编辑段落。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%AE%B5%E8%90%BD%E6%96%B0%E5%BB%BA.png",alt:"AI 知识库段落新建"}})]),t._v(" "),s("h2",{attrs:{id:"_4-如何使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-如何使用"}},[t._v("#")]),t._v(" 4. 如何使用？")]),t._v(" "),s("h3",{attrs:{id:"_4-1-召回测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-召回测试"}},[t._v("#")]),t._v(" 4.1 召回测试")]),t._v(" "),s("p",[t._v("可以在 [AI 大模型 -> AI 知识库] 菜单，点击“知识库”所在列的「召回测试」按钮，输入检索内容，即可测试知识库的检索。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E5%8F%AC%E5%9B%9E%E6%B5%8B%E8%AF%95.png",alt:"AI 知识库召回测试"}})]),t._v(" "),s("h3",{attrs:{id:"_4-2-接入-ai-聊天"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-接入-ai-聊天"}},[t._v("#")]),t._v(" 4.2 接入 AI 聊天")]),t._v(" "),s("p",[t._v("① 第一步，在角色配置时，关联对应的 AI 知识库，可多选。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E8%A7%92%E8%89%B2%E9%85%8D%E7%BD%AE.png",alt:"AI 知识库角色配置"}})]),t._v(" "),s("p",[t._v("② 第二步，使用该角色进行聊天，即可使用 AI 知识库。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/%E7%9F%A5%E8%AF%86%E5%BA%93%E6%A1%88%E4%BE%8B.png",alt:"AI 知识库的案例"}})]),t._v(" "),s("h2",{attrs:{id:"附录-向量模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#附录-向量模型"}},[t._v("#")]),t._v(" 附录：向量模型")]),t._v(" "),s("p",[t._v("在 Spring AI 中，通过 EmbeddingModel 接口，实现了各个平台的向量模型的接入。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/EmbeddingModel.png",alt:"EmbeddingModel 实现"}})]),t._v(" "),s("p",[t._v("目前在项目的 AiModelFactoryImpl 中，提供了 "),s("code",[t._v("#getOrCreateEmbeddingModel(...)")]),t._v(" 方法：")]),t._v(" "),s("ul",[s("li",[t._v("已实现 OllamaEmbeddingModel、DashScopeEmbeddingModel 模型的接入")]),t._v(" "),s("li",[t._v("未实现的其它平台的向量模型，可参考实现到上述方法中")])]),t._v(" "),s("h3",{attrs:{id:"ollamaembeddingmodel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ollamaembeddingmodel"}},[t._v("#")]),t._v(" OllamaEmbeddingModel")]),t._v(" "),s("p",[t._v("① 首先，访问 "),s("a",{attrs:{href:"https://ollama.ai/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ollama.ai/download"),s("OutboundLink")],1),t._v("，下载对应系统 Ollama 客户端，然后安装。")]),t._v(" "),s("p",[t._v("② 然后，访问 "),s("a",{attrs:{href:"https://ollama.com/search?c=embedding",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ollama.com/search?c=embedding"),s("OutboundLink")],1),t._v(" 地址，获取想运行的向量模型。")]),t._v(" "),s("p",[t._v("例如说："),s("code",[t._v("nomic-embed-text")]),t._v("，则可在命令中执行 "),s("code",[t._v("ollama pull nomic-embed-text")]),t._v(" 命令，进行一键部署。")]),t._v(" "),s("p",[t._v("③ 最后，在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，添加该向量模型。")]),t._v(" "),s("p",[t._v("注意，模型名使用你 Ollama 部署的模型名。")]),t._v(" "),s("h3",{attrs:{id:"dashscopeembeddingmodel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dashscopeembeddingmodel"}},[t._v("#")]),t._v(" DashScopeEmbeddingModel")]),t._v(" "),s("p",[t._v("① 首先，参考 "),s("a",{attrs:{href:"/ai/tongyi"}},[t._v("《【模型接入】通义千问》")]),t._v(" 文档，申请对应的 API 密钥。")]),t._v(" "),s("p",[t._v("② 然后，在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，添加该向量模型。")]),t._v(" "),s("p",[t._v("模型名，可使用 "),s("code",[t._v("text_embedding_v3")]),t._v("，更多可参考 "),s("a",{attrs:{href:"https://help.aliyun.com/zh/model-studio/developer-reference/general-text-embedding/",target:"_blank",rel:"noopener noreferrer"}},[t._v("《阿里云 —— 通用文本向量》"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"zhipuaiembeddingmodel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zhipuaiembeddingmodel"}},[t._v("#")]),t._v(" ZhiPuAiEmbeddingModel")]),t._v(" "),s("p",[t._v("① 首先，参考 "),s("a",{attrs:{href:"/ai/glm"}},[t._v("《【模型接入】智普 GLM》")]),t._v(" 文档，申请智普 AI 的 API 密钥。")]),t._v(" "),s("p",[t._v("② 然后，在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，添加该向量模型。")]),t._v(" "),s("p",[t._v("模型名，可使用 "),s("code",[t._v("embedding-3")]),t._v("，更多可参考 "),s("a",{attrs:{href:"https://bigmodel.cn/console/modelcenter/square",target:"_blank",rel:"noopener noreferrer"}},[t._v("《智谱 —— 模型广场》"),s("OutboundLink")],1),t._v(" 搜 “embedding” 关键字。")]),t._v(" "),s("h3",{attrs:{id:"qianfanembeddingmodel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#qianfanembeddingmodel"}},[t._v("#")]),t._v(" QianFanEmbeddingModel")]),t._v(" "),s("p",[t._v("① 首先，参考 "),s("a",{attrs:{href:"/ai/qianfan"}},[t._v("《【模型接入】文心一言》")]),t._v(" 文档，申请对应的 API 密钥。")]),t._v(" "),s("p",[t._v("② 然后，在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，添加该向量模型。")]),t._v(" "),s("p",[t._v("模型名，可使用 "),s("code",[t._v("embedding-v1")]),t._v("，更多可参考 "),s("a",{attrs:{href:"https://cloud.baidu.com/doc/WENXINWORKSHOP/s/om6070n97",target:"_blank",rel:"noopener noreferrer"}},[t._v("《千帆大模型服务 —— 向量Embeddings》"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"moonshotembeddingmodel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#moonshotembeddingmodel"}},[t._v("#")]),t._v(" MoonshotEmbeddingModel")]),t._v(" "),s("p",[t._v("① 首先，参考 "),s("a",{attrs:{href:"/ai/moonshot"}},[t._v("《【模型接入】Moonshot》")]),t._v(" 文档，申请对应的 API 密钥。")]),t._v(" "),s("p",[t._v("② 然后，在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，添加该向量模型。")]),t._v(" "),s("p",[t._v("模型名，可使用 "),s("code",[t._v("embo-01")]),t._v("，更多可参考 "),s("a",{attrs:{href:"https://platform.minimaxi.com/document/embeddings?key=66718fbfa427f0c8a5701627",target:"_blank",rel:"noopener noreferrer"}},[t._v("《Moonshot 文档 —— Embeddings（向量化）》"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"openaiembeddingmodel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#openaiembeddingmodel"}},[t._v("#")]),t._v(" OpenAiEmbeddingModel")]),t._v(" "),s("p",[t._v("① 首先，参考 "),s("a",{attrs:{href:"/ai/openai"}},[t._v("《【模型接入】OpenAI》")]),t._v(" 文档，申请对应的 API 密钥。")]),t._v(" "),s("p",[t._v("② 然后，在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，添加该向量模型。")]),t._v(" "),s("p",[t._v("模型名，可使用 "),s("code",[t._v("text-embedding-ada-002")]),t._v("，TODO 更多可参考 "),s("a",{attrs:{href:"https://openai.xiniushu.com/docs/guides/embeddings",target:"_blank",rel:"noopener noreferrer"}},[t._v("《OpenAI 中文文档 —— 嵌入模型》"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"azureopenaiembeddingmodel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#azureopenaiembeddingmodel"}},[t._v("#")]),t._v(" AzureOpenAiEmbeddingModel")]),t._v(" "),s("p",[t._v("① 首先，参考 "),s("a",{attrs:{href:"/ai/azure-openai"}},[t._v("《【模型接入】微软 OpenAI》")]),t._v(" 文档，申请对应的 API 密钥。")]),t._v(" "),s("p",[t._v("② 然后，在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，添加该向量模型。")]),t._v(" "),s("p",[t._v("模型名，可使用 "),s("code",[t._v("text-embedding-3-small")]),t._v("，更多可参考 "),s("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/azure/ai-services/openai/tutorials/embeddings",target:"_blank",rel:"noopener noreferrer"}},[t._v("《教程：探索 Azure OpenAI 服务嵌入和文档搜索》"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"附录-向量存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#附录-向量存储"}},[t._v("#")]),t._v(" 附录：向量存储")]),t._v(" "),s("p",[t._v("在 Spring AI 中，通过 VectorStore 接口，实现了各个平台的向量存储的接入。如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/VectorStore.png",alt:"VectorStore 实现"}})]),t._v(" "),s("p",[t._v("目前在项目的 AiModelFactoryImpl 中，提供了 "),s("code",[t._v("#getOrCreateVectorStore(...)")]),t._v(" 方法，实现如下模型的接入：")]),t._v(" "),s("ul",[s("li",[t._v("本地磁盘 SimpleVectorStore")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://redis.io/solutions/vector-database/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis"),s("OutboundLink")],1),t._v(" RedisVectorStore")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://qdrant.tech/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Qdrant"),s("OutboundLink")],1),t._v(" QdrantVectorStore")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://milvus.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Milvus"),s("OutboundLink")],1),t._v(" MilvusVectorStore")])]),t._v(" "),s("p",[t._v("ps：其它平台的向量存储，可参考实现到上述方法中。")]),t._v(" "),s("p",[t._v("另外，默认使用 SimpleVectorStore。如需切换，可修改 AiModelServiceImpl 的 "),s("code",[t._v("#getOrCreateVectorStore(...)")]),t._v(" 方法，如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/AI%E7%9F%A5%E8%AF%86%E5%BA%93/VectorStore%E5%88%87%E6%8D%A2.png",alt:"VectorStore 切换"}})]),t._v(" "),s("h3",{attrs:{id:"redisvectorstore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redisvectorstore"}},[t._v("#")]),t._v(" RedisVectorStore")]),t._v(" "),s("p",[t._v("① 参考 "),s("a",{attrs:{href:"https://blog.csdn.net/NiDeHaoPengYou/article/details/129748387",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/NiDeHaoPengYou/article/details/129748387"),s("OutboundLink")],1),t._v(" 文档，执行 "),s("code",[t._v("docker run -d --name redis-stack -p 6379:6379 -p 8001:8001 redis/redis-stack:latest")]),t._v(" 命令，安装开启向量存储的 Redis。")]),t._v(" "),s("p",[t._v("② 修改 AiModelServiceImpl 的 "),s("code",[t._v("#getOrCreateVectorStore(...)")]),t._v(" 方法，使用 RedisVectorStore。")]),t._v(" "),s("p",[t._v("另外，默认在 "),s("code",[t._v("application.yaml")]),t._v(" 配置如下：")]),t._v(" "),s("div",{staticClass:"language-YAML extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ai")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("vectorstore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向量存储")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("initialize-schema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" knowledge_index "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redis 中向量索引的名称：用于存储和检索向量数据的索引标识符，所有相关的向量搜索操作都会基于这个索引进行")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prefix")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"knowledge_segment:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redis 中存储向量数据的键名前缀：这个前缀会添加到每个存储在 Redis 中的向量数据键名前，每个 document 都是一个 hash 结构")]),t._v("\n")])])]),s("h3",{attrs:{id:"milvusvectorstore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#milvusvectorstore"}},[t._v("#")]),t._v(" MilvusVectorStore")]),t._v(" "),s("p",[t._v("① 执行 "),s("code",[t._v("docker run -d --name qdrant-test -p 6333:6333 -p 6334:6334 qdrant/qdrant:latest")]),t._v(" 命令，安装 Qdrant。")]),t._v(" "),s("p",[t._v("② 修改 AiModelServiceImpl 的 "),s("code",[t._v("#getOrCreateVectorStore(...)")]),t._v(" 方法，使用 QdrantVectorStore。")]),t._v(" "),s("p",[t._v("另外，默认在 "),s("code",[t._v("application.yaml")]),t._v(" 配置如下：")]),t._v(" "),s("div",{staticClass:"language-YAML extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ai")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("vectorstore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向量存储")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("qdrant")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("initialize-schema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("collection-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" knowledge_segment "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Qdrant 中向量集合的名称：用于存储向量数据的集合标识符，所有相关的向量操作都会在这个集合中进行")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 127.0.0.1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6334")]),t._v("\n")])])]),s("h3",{attrs:{id:"milvusvectorstore-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#milvusvectorstore-2"}},[t._v("#")]),t._v(" MilvusVectorStore")]),t._v(" "),s("p",[t._v("① 参考 "),s("a",{attrs:{href:"https://milvus.io/docs/zh/prerequisite-docker.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://milvus.io/docs/zh/prerequisite-docker.md"),s("OutboundLink")],1),t._v(" 文档，执行如下命令（需要翻墙）：")]),t._v(" "),s("div",{staticClass:"language-Bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sfL")]),t._v(" https://raw.githubusercontent.com/milvus-io/milvus/master/scripts/standalone_embed.sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" standalone_embed.sh\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" standalone_embed.sh start\n")])])]),s("p",[t._v("② 修改 AiModelServiceImpl 的 "),s("code",[t._v("#getOrCreateVectorStore(...)")]),t._v(" 方法，使用 MilvusVectorStore。")]),t._v(" "),s("p",[t._v("另外，默认在 "),s("code",[t._v("application.yaml")]),t._v(" 配置如下：")]),t._v(" "),s("div",{staticClass:"language-YAML extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ai")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("vectorstore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向量存储")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("milvus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("initialize-schema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("database-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Milvus 中数据库的名称")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("collection-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" knowledge_segment "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Milvus 中集合的名称：用于存储向量数据的集合标识符，所有相关的向量操作都会在这个集合中进行")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("client")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 127.0.0.1\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19530")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);