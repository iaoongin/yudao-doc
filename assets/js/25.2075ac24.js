(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{354:function(t,s,a){"use strict";a.r(s);var e=a(7),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("大部分项目里，其实有很多代码是重复的，几乎每个模块都有 CRUD 增删改查的功能，而这些功能的实现代码往往是大同小异的。如果这些功能都要自己去手写，非常无聊枯燥，浪费时间且效率很低，还可能会写错。")]),t._v(" "),s("p",[t._v("所以这种重复性的代码，项目提供了 "),s("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen",target:"_blank",rel:"noopener noreferrer"}},[t._v("codegen"),s("OutboundLink")],1),t._v(" 代码生成器，只需要在数据库中设计好表结构，就可以一键生成前后端代码 + 单元测试 + Swagger 接口文档 + Validator 参数校验。")]),t._v(" "),s("p",[t._v("针对不同的业务场景，项目提供了三种模式：单表、树表、主子表。")]),t._v(" "),s("p",[t._v("本文，我们将演示“单表”的使用，基于代码生成器，在 "),s("code",[t._v("yudao-module-system")]),t._v(" 模块中，开发一个【"),s("strong",[t._v("用户组")]),t._v("】的功能。")]),t._v(" "),s("h2",{attrs:{id:"👍-相关视频教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#👍-相关视频教程"}},[t._v("#")]),t._v(" 👍 相关视频教程")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://t.zsxq.com/07Jm2vrzJ",target:"_blank",rel:"noopener noreferrer"}},[t._v("从零开始 05：如何 5 分钟，开发一个新功能？"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_1-数据库表结构设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据库表结构设计"}},[t._v("#")]),t._v(" 1. 数据库表结构设计")]),t._v(" "),s("p",[t._v("设计用户组的数据库表名为 "),s("code",[t._v("system_group")]),t._v("，其建表语句如下：")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("system_group"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'名字'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'描述'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tinyint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'状态'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("creator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'创建者'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("create_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("datetime")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CURRENT_TIMESTAMP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'创建时间'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("updater"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARACTER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),t._v(" utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新者'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("update_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("datetime")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CURRENT_TIMESTAMP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UPDATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CURRENT_TIMESTAMP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新时间'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("deleted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'是否删除'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("tenant_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bigint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'租户编号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USING")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BTREE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COLLATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8mb4_unicode_ci "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户组'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E8%A1%A8%E7%BB%93%E6%9E%84.png",alt:"建表语句"}})]),t._v(" "),s("p",[t._v("① 表名的前缀，要和 Maven Module 的模块名保持一致。例如说，用户组在 "),s("code",[t._v("yudao-module-system")]),t._v(" 模块，所以表名的前缀是 "),s("code",[t._v("system_")]),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("疑问：为什么要保持一致？")]),t._v(" "),s("p",[t._v("代码生成器会自动解析表名的前缀，获得其所属的 Maven Module 模块，简化配置过程。")])]),t._v(" "),s("p",[t._v("② 设置 ID 主键，一般推荐使用 "),s("code",[t._v("bigint")]),t._v(" 长整形，并设置自增长。")]),t._v(" "),s("p",[t._v("③ 正确设置每个字段是否允许空，代码生成器会根据它生成参数是否允许空的校验规则。")]),t._v(" "),s("p",[t._v("④ 正确设置注释，代码生成器会根据它生成字段名与提示等信息。")]),t._v(" "),s("p",[t._v("⑤ 添加 "),s("code",[t._v("creator")]),t._v("、"),s("code",[t._v("create_time")]),t._v("、"),s("code",[t._v("updater")]),t._v("、"),s("code",[t._v("update_time")]),t._v("、"),s("code",[t._v("deleted")]),t._v(" 是必须设置的系统字段；如果开启多租户的功能，并且该表需要多租户的隔离，则需要添加 "),s("code",[t._v("tenant_id")]),t._v(" 字段。")]),t._v(" "),s("h2",{attrs:{id:"_2-代码生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-代码生成"}},[t._v("#")]),t._v(" 2. 代码生成")]),t._v(" "),s("h3",{attrs:{id:"_2-1-导入表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-导入表"}},[t._v("#")]),t._v(" 2.1 导入表")]),t._v(" "),s("p",[t._v("点击 [基础设施 -> 代码生成] 菜单，点击 [基于 DB 导入] 按钮，选择 "),s("code",[t._v("system_group")]),t._v(" 表，后点击 [确认] 按钮。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E5%AF%BC%E5%85%A5%E8%A1%A8.png",alt:"基于 DB 导入"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("代码实现？")]),t._v(" "),s("p",[t._v("可见 "),s("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen/inner/CodegenBuilder.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("CodegenBuilder"),s("OutboundLink")],1),t._v(" 类，自动解析数据库的表结构，生成默认的配置。")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-编辑配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-编辑配置"}},[t._v("#")]),t._v(" 2.2 编辑配置")]),t._v(" "),s("p",[t._v("点击 "),s("code",[t._v("system_group")]),t._v(" 所在行的 [编辑] 按钮，修改生成配置。后操作如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF.png",alt:"基本信息"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF.png",alt:"字段信息"}})]),t._v(" "),s("ul",[s("li",[t._v("将 "),s("code",[t._v("status")]),t._v(" 字段的显示类型为【下拉框】，字典类型为【系统状态】。")]),t._v(" "),s("li",[t._v("将 "),s("code",[t._v("description")]),t._v(" 字段的【查询】取消。")]),t._v(" "),s("li",[t._v("将 "),s("code",[t._v("id")]),t._v("、"),s("code",[t._v("name")]),t._v("、"),s("code",[t._v("description")]),t._v("、"),s("code",[t._v("status")]),t._v(" 字段的【示例】填写上。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("字段信息")]),t._v(" "),s("ul",[s("li",[t._v("插入：新增时，是否传递该字段。")]),t._v(" "),s("li",[t._v("编辑：修改时，是否传递该字段。")]),t._v(" "),s("li",[t._v("列表：Table 表格，是否展示该字段。")]),t._v(" "),s("li",[t._v("查询：搜索框，是否支持该字段查询，查询的条件是什么。")]),t._v(" "),s("li",[t._v("允许空：新增或修改时，是否必须传递该字段，用于 Validator 参数校验。")]),t._v(" "),s("li",[t._v("字典类型：在显示类型是下拉框、单选框、复选框时，选择使用的字典。")]),t._v(" "),s("li",[t._v("示例：参数示例，用于 Swagger 接口文档的 "),s("code",[t._v("example")]),t._v(" 示例。")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE-%E7%94%9F%E6%88%90%E4%BF%A1%E6%81%AF.png",alt:"生成信息"}})]),t._v(" "),s("ul",[s("li",[t._v("将【上级菜单】设置为【系统管理】。")]),t._v(" "),s("li",[t._v("将【前端类型】设置为“前端项目”对应的“前端类型”。例如说，我们这里演示的是 "),s("code",[t._v("yudao-ui-admin-vue3")]),t._v(" 前端项目，则选择了【Vue3 Element Plus 标准模版】。")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("前端项目")]),t._v(" "),s("th",[t._v("前端类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("yudao-ui-admin-vue2")]),t._v(" "),s("td",[t._v("Vue2 Element UI 标准模版")])]),t._v(" "),s("tr",[s("td",[t._v("yudao-ui-admin-vue3")]),t._v(" "),s("td",[t._v("Vue3 Element Plus 标准模版")])]),t._v(" "),s("tr",[s("td",[t._v("yudao-ui-admin-vben")]),t._v(" "),s("td",[t._v("Vben5.0 Ant Design Schema 模版")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("生成信息")]),t._v(" "),s("ul",[s("li",[t._v("生成场景：分成管理后台、用户 App 两种，用于生成 Controller 放在 "),s("code",[t._v("admin")]),t._v(" 还是 "),s("code",[t._v("app")]),t._v(" 包。")]),t._v(" "),s("li",[t._v("上级菜单：生成场景是管理后台时，需要设置其所属的上级菜单。")]),t._v(" "),s("li",[t._v("前端类型： 提供多种 UI 模版。后端的 "),s("code",[t._v("application.yaml")]),t._v(" 配置文件中的 "),s("code",[t._v("yudao.codegen.front-type")]),t._v(" 配置项，设置默认的 UI 模版，避免每次都需要设置。")])])]),t._v(" "),s("p",[t._v("完成后，点击 [提交] 按钮，保存生成配置。")]),t._v(" "),s("h3",{attrs:{id:"_2-3-预览代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-预览代码"}},[t._v("#")]),t._v(" 2.3 预览代码")]),t._v(" "),s("p",[t._v("点击 "),s("code",[t._v("system_group")]),t._v(" 所在行的 [预览] 按钮，在线预览生成的代码，检查是否符合预期。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E4%BB%A3%E7%A0%81%E9%A2%84%E8%A7%88.png",alt:"代码预览"}})]),t._v(" "),s("h3",{attrs:{id:"_2-4-生成代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-生成代码"}},[t._v("#")]),t._v(" 2.4 生成代码")]),t._v(" "),s("p",[t._v("点击 "),s("code",[t._v("system_group")]),t._v(" 所在行的 [生成代码] 按钮，下载生成代码的压缩包，双击进行解压。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90.png",alt:"生成代码"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("代码实现？")]),t._v(" "),s("p",[t._v("可见 "),s("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-infra/yudao-module-infra-biz/src/main/java/cn/iocoder/yudao/module/infra/service/codegen/inner/CodegenEngine.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("CodegenEngine"),s("OutboundLink")],1),t._v(" 类，基于 Velocity 模板引擎，生成具体代码。模板文件，可见 "),s("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-infra/yudao-module-infra-biz/src/main/resources/codegen",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resources/codegen")]),s("OutboundLink")],1),t._v(" 目录。")])]),t._v(" "),s("h2",{attrs:{id:"_3-代码运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码运行"}},[t._v("#")]),t._v(" 3. 代码运行")]),t._v(" "),s("p",[t._v("本小节，我们将生成的代码，复制到项目中，并进行运行。")]),t._v(" "),s("h3",{attrs:{id:"_3-1-后端运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-后端运行"}},[t._v("#")]),t._v(" 3.1 后端运行")]),t._v(" "),s("p",[t._v("① 将生成的后端代码，复制到项目中。操作如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E5%A4%8D%E5%88%B6%E5%90%8E%E7%AB%AF.png",alt:"复制后端"}})]),t._v(" "),s("p",[t._v("② 将 "),s("code",[t._v("ErrorCodeConstants.java_手动操作")]),t._v(" 文件的错误码，复制到该模块 ErrorCodeConstants 类中，并设置对应的错误码编号，之后进行删除。操作如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E6%B7%BB%E5%8A%A0%E9%94%99%E8%AF%AF%E7%A0%81.png",alt:"添加错误码"}})]),t._v(" "),s("p",[t._v("③ 将 "),s("code",[t._v("h2.sql")]),t._v(" 的 CREATE 语句复制到该模块的 "),s("code",[t._v("create_tables.sql")]),t._v(" 文件，DELETE 语句复制到该模块的 "),s("code",[t._v("clean.sql")]),t._v("。操作如下图：")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("友情提示：最新版本，第 ③ 部分的单元测试，默认已经不在生成。所以，不需要操作这一步。")]),t._v(" "),s("p",[t._v("原因是：大多数团队，没有编写单元测试的习惯，导致生成的单元测试代码，会被直接删除。所以，我们默认不生成单元测试代码，减少不必要的代码生成。")]),t._v(" "),s("p",[t._v("如果想要开启，可以把 "),s("code",[t._v("yudao.codegen.unit-test-enable")]),t._v(" 配置项设置为 "),s("code",[t._v("true")]),t._v("，然后重新生成代码。")]),t._v(" "),s("p",[t._v("另外，如果你想要编写单元测试，可以考虑使用 "),s("a",{attrs:{href:"https://www.marscode.cn/home?utm_source=kol&utm_medium=yudao&utm_campaign=reception",target:"_blank",rel:"noopener noreferrer"}},[t._v("MarsCode"),s("OutboundLink")],1),t._v(" 智能编码插件，可以免费生成不错的单元测试。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E5%A4%8D%E5%88%B6H2.png",alt:"复制 h2 SQL"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("疑问：`create_tables.sql` 和 `clean.sql` 文件的作用是什么？")]),t._v(" "),s("p",[t._v("项目的单元测试，需要使用到 H2 内存数据库，"),s("code",[t._v("create_tables.sql")]),t._v(" 用于创建所有的表结构，"),s("code",[t._v("clean.sql")]),t._v(" 用于每个单元测试的方法跑完后清理数据。")])]),t._v(" "),s("p",[t._v("然后，运行 GroupServiceImplTest 单元测试，执行通过。")]),t._v(" "),s("p",[t._v("④ 打开数据库工具，运行代码生成的 "),s("code",[t._v("sql/sql.sql")]),t._v(" 文件，用于菜单的初始化。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E5%88%9D%E5%A7%8B%E5%8C%96%E8%8F%9C%E5%8D%95.png",alt:"初始化菜单"}})]),t._v(" "),s("p",[t._v("⑤ Debug 运行 YudaoServerApplication 类，启动后端项目。通过 IDEA 的 [Actuator -> Mappings] 菜单，可以看到代码生成的 GroupController 的 RESTful API 接口已经生效。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8.png",alt:"RESTful API 接口"}})]),t._v(" "),s("h3",{attrs:{id:"_3-2-前端运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-前端运行"}},[t._v("#")]),t._v(" 3.2 前端运行")]),t._v(" "),s("p",[t._v("① 将生成的前端代码，复制到项目中。操作如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E5%A4%8D%E5%88%B6%E5%89%8D%E7%AB%AF.png",alt:"复制前端"}})]),t._v(" "),s("p",[t._v("② "),s("strong",[t._v("重新")]),t._v("执行 "),s("code",[t._v("npm run dev")]),t._v(" 命令，启动前端项目。点击 [系统管理 -> 菜单管理] 菜单，点击【刷新菜单缓存】，因为前端项目会缓存菜单在内存中的，所以需要刷新一下。")]),t._v(" "),s("p",[t._v("③ 点击 [系统管理 -> 用户组管理] 菜单，就可以看到用户组的 UI 界面。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/%E5%8D%95%E8%A1%A8/%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2.png",alt:"前端界面"}})]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("至此，我们已经完成了【"),s("strong",[t._v("用户组")]),t._v("】功能的代码生成，基本节省了你 80% 左右的开发任务，后续可以根据自己的需求，进行剩余的 20% 的开发！")]),t._v(" "),s("h2",{attrs:{id:"_4-后续变更"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-后续变更"}},[t._v("#")]),t._v(" 4. 后续变更")]),t._v(" "),s("p",[t._v("随着业务的发展，已经生成代码的功能需要变更。继续以【"),s("strong",[t._v("用户组")]),t._v("】举例子，它的 "),s("code",[t._v("system_group")]),t._v(" 表需要新增一个分类 "),s("code",[t._v("category")]),t._v(" 字段，此时"),s("strong",[t._v("不建议")]),t._v("使用代码生成器，而是直接修改已经生成的代码：")]),t._v(" "),s("p",[t._v("① 后端：修改 GroupDO 数据实体类、GroupSaveReqVO 保存 VO 类、GroupSaveRespVO 响应 VO 类，新增 "),s("code",[t._v("category")]),t._v(" 字段。")]),t._v(" "),s("p",[t._v("② 前端：修改 Vue 的 "),s("code",[t._v("index.vue")]),t._v(" 列表和 Form 表单组件，新增 "),s("code",[t._v("category")]),t._v(" 字段。")]),t._v(" "),s("p",[t._v("③ 重新编译后后端，并进行启动。")]),t._v(" "),s("p",[t._v("over！非常简单方便，即保证了代码的整洁规范，又不增加过多的开发量。")]),t._v(" "),s("h2",{attrs:{id:"_5-常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-常见问题"}},[t._v("#")]),t._v(" 5. 常见问题")]),t._v(" "),s("p",[t._v("① 生成的代码结构，有没具体说明？")]),t._v(" "),s("p",[t._v("答：参见 "),s("a",{attrs:{href:"/project-intro"}},[t._v("《项目结构》")]),t._v(" 文档的说明，最好把对应视频好好看下。")]),t._v(" "),s("p",[t._v("② 为什么要分 XXXSaveReqVO、XXXRespVO、XXXPageReqVO 三个 VO 类？")]),t._v(" "),s("p",[t._v("答：星球里 "),s("a",{attrs:{href:"https://t.zsxq.com/14Fc743WH",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/14Fc743WH"),s("OutboundLink")],1),t._v(" 进行了 VO 拆分的讨论，总体大家倾向拆分成三个 VO 类，因为这样更加清晰，而且也不会增加太多的维护工作量。")]),t._v(" "),s("p",[t._v("可能你会想，能不能把 XXXSaveReqVO 和 XXXRespVO 合并成一个呢？有两方面的考虑：")]),t._v(" "),s("ol",[s("li",[t._v("一般来说，新增/修改是不传递 "),s("code",[t._v("createTime")]),t._v("、"),s("code",[t._v("creator")]),t._v(" 等字段，响应是需要返回 "),s("code",[t._v("createTime")]),t._v("、"),s("code",[t._v("creator")]),t._v(" 等字段，两者的字段无法不一致。")]),t._v(" "),s("li",[t._v("一旦 VO 和 DO 拆分开后，调整字段时，例如说新增一个 xxx 字段，两个 VO 的修改成本，和一个 VO 实际是差不多的。")])]),t._v(" "),s("p",[t._v("③ 为什么 UI 界面的数据字典，下拉没有选项，或者列表没有展示它的文本？")]),t._v(" "),s("p",[t._v("类似 "),s("a",{attrs:{href:"https://t.zsxq.com/owJzU",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://t.zsxq.com/owJzU"),s("OutboundLink")],1),t._v(" 的问题。")]),t._v(" "),s("p",[t._v("原因是：需要在前端的代码里，枚举一下。例如说 Vue3 + Element-Plus 版本，需要在 "),s("code",[t._v("yudao-ui-admin-vue3/src/utils/dict.ts")]),t._v(" 的 "),s("code",[t._v("DICT_TYPE")]),t._v(" 添加字典的 "),s("code",[t._v("type")]),t._v(" 枚举值。")]),t._v(" "),s("p",[t._v("④ 为什么生成的前端代码在 IDE 里会有红色报错？")]),t._v(" "),s("p",[t._v("那是因为前端 Lint 会检查代码格式，可以通过 IDE 格式化，或者通过类似 "),s("code",[t._v("npm run lint")]),t._v(" 命令。")])])}),[],!1,null,null,null);s.default=r.exports}}]);