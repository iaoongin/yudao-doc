(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{508:function(e,t,a){"use strict";a.r(t);var s=a(7),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("本章节，介绍项目的短信功能。该功能提供统一的短信 API 给其它模块，使它们可以快速接入短信功能，无需关心不同短信平台的具体对接。")]),e._v(" "),t("p",[e._v("短信采用异步发送，基于 "),t("a",{attrs:{href:"/message-queue/event"}},[e._v("消息队列")]),e._v("，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/01.png",alt:"整体流程"}})]),e._v(" "),t("p",[e._v("该功能由 "),t("code",[e._v("yudao-module-system")]),e._v(" 模块实现，其中：")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/sms/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("service/sms")]),t("OutboundLink")],1),e._v("：短信【业务】，提供短信渠道、模板的配置，短信日志的查看，短信的发送等功能")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/framework/sms",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("frameowrk/sms")]),t("OutboundLink")],1),e._v("：短信【组件】，封装阿里云、腾讯云、华为云、七牛云等短信平台的客户端。")])]),e._v(" "),t("h2",{attrs:{id:"_1-表结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-表结构"}},[e._v("#")]),e._v(" 1. 表结构")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/02.png",alt:"表结构"}})]),e._v(" "),t("h2",{attrs:{id:"_2-短信配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-短信配置"}},[e._v("#")]),e._v(" 2. 短信配置")]),e._v(" "),t("p",[e._v("本小节，讲解如何配置短信功能，整个过程如下：")]),e._v(" "),t("ul",[t("li",[e._v("新建一个短信【渠道】，配置对应短信平台的账号")]),e._v(" "),t("li",[e._v("新建一个短信【模版】，配置对应短信平台的模板")]),e._v(" "),t("li",[e._v("测试该短信模板，查看对应的短信【日志】，确认是否发送成功")])]),e._v(" "),t("h3",{attrs:{id:"_2-1-新建短信渠道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-新建短信渠道"}},[e._v("#")]),e._v(" 2.1 新建短信渠道")]),e._v(" "),t("p",[e._v("① 点击 [系统管理 -> 消息中心 -> 短信管理 -> 短信渠道] 菜单，查看短信渠道的列表。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/03.png",alt:"短信渠道的列表"}})]),e._v(" "),t("p",[e._v("② 点击 [新增] 按钮，选择渠道编码为【调试（钉钉）】，并填写信息如下图：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/04.png",alt:"短信渠道的新增"}})]),e._v(" "),t("div",{staticClass:"language-YAML extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("短信 API 的账号")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 696b5d8ead48071237e4aa5861ff08dbadb2b4ded1c688a7b7c9afc615579859\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("短信 API 的密钥")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" SEC5c4e5ff888bc8a9923ae47f59e7ccd30af1f14d93c55b4e2c9cb094e35aeed67\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("疑问 1：为什么选择渠道编码为【调试（钉钉）】？")]),e._v(" "),t("p",[e._v("该类型使用钉钉机器人来模拟短信发送，用于日常调试。")]),e._v(" "),t("ul",[t("li",[e._v("短信 API 的账号，对应机器人的 Webhook 的 "),t("code",[e._v("access_token")]),e._v(" 参数")]),e._v(" "),t("li",[e._v("短信 API 的密钥，对应机器人的安全设置的加签")])]),e._v(" "),t("p",[e._v("上图使用的配置，是艿艿自己的钉钉机器人。正式使用时，必须参考 "),t("a",{attrs:{href:"https://open.dingtalk.com/document/group/custom-robot-access",target:"_blank",rel:"noopener noreferrer"}},[e._v("《钉钉开放平台 —— 自定义机器人接入 》"),t("OutboundLink")],1),e._v(" 文档，申请自己的专属机器人。")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("疑问 2：可以选择其它渠道编码吗？")]),e._v(" "),t("p",[e._v("当然可以，这里主要考虑部分同学暂时没有申请短信平台，所以使用【调试（钉钉）】渠道编码。")]),e._v(" "),t("p",[e._v("不同短信平台的配置，可见 "),t("a",{attrs:{href:"#_6-%E7%9F%AD%E4%BF%A1%E5%B9%B3%E5%8F%B0%E9%99%84%E5%BD%95"}},[e._v("「6. 短信平台附录」")]),e._v(" 小节。")])]),e._v(" "),t("h3",{attrs:{id:"_2-2-新建短信模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-新建短信模板"}},[e._v("#")]),e._v(" 2.2 新建短信模板")]),e._v(" "),t("p",[e._v("① 点击 [系统管理 -> 消息中心 -> 短信管理 -> 短信模板] 菜单，查看短信模板的列表。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/05.png",alt:"短信模板的新增"}})]),e._v(" "),t("p",[e._v("② 点击 [新增] 按钮，选择刚创建的短信渠道，并填写信息如下图：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/06.png",alt:"短信模板的新增"}})]),e._v(" "),t("ul",[t("li",[e._v("短信渠道编号：发送该短信模板时，使用的短信渠道，即使用哪个短信平台进行发送")]),e._v(" "),t("li",[e._v("模板编号：短信模板的唯一标识，使用短信 API 时，通过它标识使用的短信模板")]),e._v(" "),t("li",[e._v("模板内容：短信模板的内容，使用 "),t("code",[e._v("{var}")]),e._v(" 作为占位符，例如说 "),t("code",[e._v("{name}")]),e._v("、"),t("code",[e._v("{code}")]),e._v(" 等")]),e._v(" "),t("li",[e._v("短信 API 模板编号：短信平台的短信模板的编号，需要保证该模板在短信平台已经审核通过")]),e._v(" "),t("li",[e._v("开启状态：短信模板被禁用时，该短信模板将不发送短信，只记录短信日志")])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("疑问：为什么设计短信模板的功能？")]),e._v(" "),t("p",[e._v("在一些场景下，需要修改短信模板所使用的短信平台。例如说：短信平台出现故障，或者切换短信平台等等。")]),e._v(" "),t("p",[e._v("此时，只需要修改短信模板的两个属性：短信渠道编号、短信 API 模板编号，无需重启应用。")])]),e._v(" "),t("h3",{attrs:{id:"_2-3-查看短信日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-查看短信日志"}},[e._v("#")]),e._v(" 2.3 查看短信日志")]),e._v(" "),t("p",[e._v("① 使用钉钉，扫码 "),t("a",{attrs:{href:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/07.jpg"}},[e._v("图片")]),e._v(" 加入机器人所在的【ruoyi-vue-pro 短信测试群】，查看测试短信的模拟发送。")]),e._v(" "),t("p",[e._v("② 点击 [测试] 按钮，输入任一手机号，进行该短信模板的模拟发送。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/08.png",alt:"测试短信模板"}})]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/09.png",alt:"测试短信模板"}})]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("友情提示：如果使用的短信渠道是阿里云、腾讯云等正式的短信平台，则会发送到填写的手机号中。例如说：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/10.png",alt:"接收示例"}})])]),e._v(" "),t("p",[e._v("③ 点击 [系统管理 -> 消息中心 -> 短信管理 -> 短信日志] 采单，可以查看到每条短信的发送状态、接收状态。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/11.png",alt:"短信日志"}})]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("常见问题：为什么日志的接受状态，一直处理“等待结果”？")]),e._v(" "),t("p",[e._v("因为你没配置短信回调 URL，导致短信平台无法回调我们的系统，所以一直等待结果。具体怎么配置，可见 "),t("a",{attrs:{href:"#_6-%E7%9F%AD%E4%BF%A1%E5%B9%B3%E5%8F%B0%E9%99%84%E5%BD%95"}},[e._v("短信平台附录")]),e._v(" 小节。")])]),e._v(" "),t("h2",{attrs:{id:"_3-短信发送"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-短信发送"}},[e._v("#")]),e._v(" 3. 短信发送")]),e._v(" "),t("h3",{attrs:{id:"_3-1-smssendapi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-smssendapi"}},[e._v("#")]),e._v(" 3.1 SmsSendApi")]),e._v(" "),t("p",[e._v("使用 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/sms/SmsSendApi.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("SmsSendApi"),t("OutboundLink")],1),e._v(" 进行短信的发送，支持多种用户类型。它的方法如下：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/21.png",alt:"短信发送"}})]),e._v(" "),t("h3",{attrs:{id:"_3-2-实战案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-实战案例"}},[e._v("#")]),e._v(" 3.2 实战案例")]),e._v(" "),t("p",[e._v("以工作流申请通过时，发送短信为例子，讲解 SmsSendApi 的使用。")]),e._v(" "),t("p",[e._v("① 引入 "),t("code",[e._v("yudao-module-system-api")]),e._v(" 依赖，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/22.png",alt:" 依赖"}})]),e._v(" "),t("p",[e._v("② 新建对应的短信模板，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/23.png",alt:"新建短信模板"}})]),e._v(" "),t("p",[e._v("③ 使用 Spring 注入 SmsSendApi Bean，调用对应的短信发送方法。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/24.png",alt:"调用 SmsSendApi 方法"}})]),e._v(" "),t("h2",{attrs:{id:"_4-验证码发送"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-验证码发送"}},[e._v("#")]),e._v(" 4. 验证码发送")]),e._v(" "),t("h3",{attrs:{id:"_4-1-smscodeapi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-smscodeapi"}},[e._v("#")]),e._v(" 4.1 SmsCodeApi")]),e._v(" "),t("p",[e._v("使用 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/api/sms/SmsCodeApi.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("SmsCodeApi"),t("OutboundLink")],1),e._v(" 进行【验证码】短信的发送，例如说：用户手机验证码登录、用户忘记密码等等。它的方法如下：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/21.png",alt:"短信发送"}})]),e._v(" "),t("p",[e._v("验证码使用 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/dal/dataobject/sms/SmsCodeDO.java",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("system_sms_code")]),t("OutboundLink")],1),e._v(" 表进行存储，默认每天最多发送 10 条，每分钟发送 1 条，有效期为 10 分钟，可通过 "),t("code",[e._v("yudao.sms-code")]),e._v(" 配置项进行自定义：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/32.png",alt:" 配置项"}})]),e._v(" "),t("h3",{attrs:{id:"_4-2-实战案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-实战案例"}},[e._v("#")]),e._v(" 4.2 实战案例")]),e._v(" "),t("p",[e._v("以会员用户手机验证码登录为例子，讲解 SmsCodeApi 的使用。")]),e._v(" "),t("p",[e._v("① 引入 "),t("code",[e._v("yudao-module-system-api")]),e._v(" 依赖，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/34.png",alt:" 依赖"}})]),e._v(" "),t("p",[e._v("② 新建对应的短信模板，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/35.png",alt:"新建短信模板"}})]),e._v(" "),t("p",[e._v("③ 在 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-api/src/main/java/cn/iocoder/yudao/module/system/enums/sms/SmsSceneEnum.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("SmsSceneEnum"),t("OutboundLink")],1),e._v(" 中，枚举会员用户的手机号登录的场景，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/36.png",alt:"SmsSceneEnum 枚举"}})]),e._v(" "),t("p",[e._v("④ 使用 Spring 注入 SmsCodeApi Bean，调用对应的短信验证码的发送与使用方法。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/33.png",alt:"调用 SmsCodeApi 方法"}})]),e._v(" "),t("h2",{attrs:{id:"_5-短信客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-短信客户端"}},[e._v("#")]),e._v(" 5. 短信客户端")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/framework/sms",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("frameowrk/sms")]),t("OutboundLink")],1),e._v(" 短信【组件】，对接阿里云、腾讯云等短信平台，提供统一的短信客户端，提供给 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/service/sms/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("service/sms")]),t("OutboundLink")],1),e._v(" 短信【业务】模块来调用。")]),e._v(" "),t("h3",{attrs:{id:"_5-1-smsclient"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-smsclient"}},[e._v("#")]),e._v(" 5.1 SmsClient")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/framework/sms/core/client/SmsClient.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("SmsClient"),t("OutboundLink")],1),e._v(" 接口，定义短信客户端的方法。代码如下：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/41.png",alt:"SmsClient 接口"}})]),e._v(" "),t("p",[e._v("每个短信平台，都对应一个 SmsClient 实现类。")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/42.png",alt:"SmsClient 实现"}})]),e._v(" "),t("h3",{attrs:{id:"_5-2-对接其它短信平台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-对接其它短信平台"}},[e._v("#")]),e._v(" 5.2 对接其它短信平台")]),e._v(" "),t("p",[e._v("如果你想要对接其它短信平台，自定义一个 SmsClient 实现类，并使用 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-system/yudao-module-system-biz/src/main/java/cn/iocoder/yudao/module/system/framework/sms/core/client/impl/SmsClientFactoryImpl.java#L73-L85",target:"_blank",rel:"noopener noreferrer"}},[e._v("SmsClientFactoryImpl"),t("OutboundLink")],1),e._v(" 进行创建。代码如下：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE/45.png",alt:"SmsClientFactoryImpl 创建客户端"}})]),e._v(" "),t("h2",{attrs:{id:"_6-短信平台附录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-短信平台附录"}},[e._v("#")]),e._v(" 6. 短信平台附录")]),e._v(" "),t("p",[e._v("一般情况下，建议接入 2-3 个短信平台，避免某个短信平台故障时，影响业务的正常运行。")]),e._v(" "),t("p",[e._v("例如说，手机验证码的短信平台 A 故障时，赶紧将短信验证码切换到短信平台 B 上，否则用户将无法正常登录或是注册。")]),e._v(" "),t("h3",{attrs:{id:"_6-1-阿里云"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-阿里云"}},[e._v("#")]),e._v(" 6.1 阿里云")]),e._v(" "),t("p",[e._v("① 短信 API 的账号、密钥，可通过 "),t("a",{attrs:{href:"https://ram.console.aliyun.com/manage/ak",target:"_blank",rel:"noopener noreferrer"}},[e._v("阿里云 —— AccessKey"),t("OutboundLink")],1),e._v(" 获取。")]),e._v(" "),t("p",[e._v("② 短信发送回调 URL，可通过 "),t("a",{attrs:{href:"https://dysms.console.aliyun.com/general/upward",target:"_blank",rel:"noopener noreferrer"}},[e._v("阿里云 —— 短信服务 —— 通用设置"),t("OutboundLink")],1),e._v(" 配置。它对应的是 SmsCallbackController 的 "),t("code",[e._v("#receiveAliyunSmsStatus(...)")]),e._v(" 地址。")]),e._v(" "),t("h3",{attrs:{id:"_6-2-腾讯云"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-腾讯云"}},[e._v("#")]),e._v(" 6.2 腾讯云")]),e._v(" "),t("p",[e._v("① 短信 API 的账号、密钥，可通过 "),t("a",{attrs:{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank",rel:"noopener noreferrer"}},[e._v("腾讯云 —— API 密钥管理"),t("OutboundLink")],1),e._v(" 获取。")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("注意！！！")]),e._v(" "),t("p",[e._v("腾讯云需要额外使用 "),t("a",{attrs:{href:"https://console.cloud.tencent.com/smsv2/app-manage",target:"_blank",rel:"noopener noreferrer"}},[e._v("SDKAppID"),t("OutboundLink")],1),e._v(" 参数，它的账号需要采用 "),t("code",[e._v("secretId SDKAppID")]),e._v(" 格式。")]),e._v(" "),t("p",[e._v("例如说：在“API 密钥管理”获得了 "),t("code",[e._v("SecretId")]),e._v(" 为 "),t("code",[e._v("A")]),e._v("，"),t("code",[e._v("SecretKey")]),e._v(" 为 "),t("code",[e._v("B")]),e._v("，在“SDKAppID”获得了 "),t("code",[e._v("SDKAppID")]),e._v(" 为 "),t("code",[e._v("18")]),e._v("，则配置短信 API 的账号为 "),t("code",[e._v("A 18")]),e._v("，短信 API 的密钥为 "),t("code",[e._v("B")]),e._v("。")])]),e._v(" "),t("p",[e._v("② 短信发送回调 URL，可通过 "),t("a",{attrs:{href:"https://console.cloud.tencent.com/smsv2/app-setting",target:"_blank",rel:"noopener noreferrer"}},[e._v("腾讯云 —— 短信 —— 基础配置"),t("OutboundLink")],1),e._v(" 配置。它对应的是 SmsCallbackController 的 "),t("code",[e._v("#receiveTencentSmsStatus(...)")]),e._v(" 地址。")]),e._v(" "),t("h3",{attrs:{id:"_6-3-华为云"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-华为云"}},[e._v("#")]),e._v(" 6.3 华为云")]),e._v(" "),t("p",[e._v("① 短信 API 的账号、密钥，可通过 "),t("a",{attrs:{href:"https://console.huaweicloud.com/iam/?#/mine/accessKey",target:"_blank",rel:"noopener noreferrer"}},[e._v("华为云 —— 访问密钥"),t("OutboundLink")],1),e._v(" 获取。")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("注意！！！")]),e._v(" "),t("p",[e._v("华为云需要额外使用 sender 通道号，它的账号需要采用 "),t("code",[e._v("AccessKeyId sender")]),e._v(" 格式。")]),e._v(" "),t("p",[e._v("例如说：在“华为云访问密钥”获得了 "),t("code",[e._v("AccessKeyId")]),e._v(" 为 "),t("code",[e._v("A")]),e._v("，"),t("code",[e._v("SecretAccessKey")]),e._v(" 为 "),t("code",[e._v("B")]),e._v("，在“华为云签名”获得了 "),t("code",[e._v("sender")]),e._v(" 为 "),t("code",[e._v("8824060312575")]),e._v("，则配置短信 API 的账号为 "),t("code",[e._v("A 8824060312575")]),e._v("，短信 API 的密钥为 "),t("code",[e._v("B")]),e._v("。")])]),e._v(" "),t("p",[e._v("② 短信发送回调 URL，可以通过我们项目的 [系统管理 -> 消息中心 -> 短信管理 -> 短信渠道] 菜单，配置它的“短信发送回调 URL”字段即可。它对应的是 SmsCallbackController 的 "),t("code",[e._v("#receiveHuaweiSmsStatus(...)")]),e._v(" 地址。")]),e._v(" "),t("h3",{attrs:{id:"_6-4-七牛云"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-七牛云"}},[e._v("#")]),e._v(" 6.4 七牛云")]),e._v(" "),t("p",[e._v("① 短信 API 的账号、密钥，可通过 "),t("a",{attrs:{href:"https://portal.qiniu.com/developer/user/key",target:"_blank",rel:"noopener noreferrer"}},[e._v("七牛云 —— 密钥管理"),t("OutboundLink")],1),e._v(" 获取。")]),e._v(" "),t("p",[e._v("② 短信发送回调 URL，可通过 "),t("a",{attrs:{href:"https://portal.qiniu.com/sms/settings",target:"_blank",rel:"noopener noreferrer"}},[e._v("七牛云 —— 云短信 —— 设置"),t("OutboundLink")],1),e._v(" 配置。它对应的是 SmsCallbackController 的 "),t("code",[e._v("#receiveQiniuSmsStatus(...)")]),e._v(" 地址。")]),e._v(" "),t("h3",{attrs:{id:"_6-5-更多短信平台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-更多短信平台"}},[e._v("#")]),e._v(" 6.5 更多短信平台")]),e._v(" "),t("p",[e._v("短信平台非常的多，欢迎给我们 pull request 贡献。")]),e._v(" "),t("p",[e._v("例如说：合一、云片、京东云、容联云、亿美软通、天翼云、网易云等等。")]),e._v(" "),t("p",[e._v("如果你想参与，可以添加 "),t("code",[e._v("wangwenbin-server")]),e._v(" 微信好，备注“短信”即可。")])])}),[],!1,null,null,null);t.default=r.exports}}]);