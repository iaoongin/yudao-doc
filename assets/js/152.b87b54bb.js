(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{480:function(e,t,a){"use strict";a.r(t);var _=a(7),r=Object(_.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("项目基于 Spring AI + 自己实现的 "),t("code",[e._v("models/deepseek")]),e._v("，实现 "),t("a",{attrs:{href:"https://www.deepseek.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("DeepSeek"),t("OutboundLink")],1),e._v(" 的接入：")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("功能")]),e._v(" "),t("th",[e._v("模型")]),e._v(" "),t("th",[e._v("Spring AI 客户端")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("AI 对话")]),e._v(" "),t("td",[e._v("deepseek-chat、deepseek-reasoner")]),e._v(" "),t("td",[e._v("DeepSeekChatModel")])]),e._v(" "),t("tr",[t("td",[e._v("AI 绘画")]),e._v(" "),t("td",[e._v("Janus-Pro")]),e._v(" "),t("td",[e._v("暂不支持")])])])]),e._v(" "),t("h2",{attrs:{id:"_1-申请密钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-申请密钥"}},[e._v("#")]),e._v(" 1. 申请密钥")]),e._v(" "),t("p",[e._v("DeepSeek 目前有 3 种 方式，可以进行使用：")]),e._v(" "),t("p",[e._v("① 方式一：官方 API：DeepSeek 提供官方 API 服务，并且价格非常便宜，一般建议直接采用这种方式使用。")]),e._v(" "),t("p",[e._v("② 方式二：私有化部署："),t("a",{attrs:{href:"https://github.com/deepseek-ai",target:"_blank",rel:"noopener noreferrer"}},[e._v("DeepSeek"),t("OutboundLink")],1),e._v(" 是开源模型，所以可以本地私有化部署使用。")]),e._v(" "),t("p",[e._v("③ 方式三：云厂商部署：类似阿里云、字节、腾讯等厂商，私有化部署了 DeepSeek，然后提供 API 服务。")]),e._v(" "),t("h3",{attrs:{id:"_1-1-方式一-官方-api-申请"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-方式一-官方-api-申请"}},[e._v("#")]),e._v(" 1.1 方式一：官方 API 申请")]),e._v(" "),t("p",[e._v("① 在 "),t("a",{attrs:{href:"https://platform.deepseek.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("DeepSeek 开放平台"),t("OutboundLink")],1),e._v(" 上，注册一个账号。目前，默认注册就送 500w tokens，还是蛮爽的。")]),e._v(" "),t("p",[e._v("② 在 "),t("a",{attrs:{href:"https://platform.deepseek.com/api_keys",target:"_blank",rel:"noopener noreferrer"}},[e._v("API keys"),t("OutboundLink")],1),e._v(" 菜单，创建一个 API key 即可。")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("申请完成后，可以在我们系统的 [AI 大模型 -> 控制台 -> API 密钥] 菜单，进行密钥的配置。只需要填写“密钥”，不需要填写“自定义 API URL”（因为 Spring AI 默认官方地址）。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/DeepSeek-%E5%AE%98%E6%96%B9.png",alt:"官方的密钥配置"}})]),e._v(" "),t("h3",{attrs:{id:"_1-2-方式二-私有化部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-方式二-私有化部署"}},[e._v("#")]),e._v(" 1.2 方式二：私有化部署")]),e._v(" "),t("p",[e._v("① 访问 "),t("a",{attrs:{href:"https://ollama.ai/download",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://ollama.ai/download"),t("OutboundLink")],1),e._v("，下载对应系统 Ollama 客户端，然后安装。")]),e._v(" "),t("p",[e._v("② 安装完成后，在命令中执行 "),t("code",[e._v("ollama run deepseek-r1")]),e._v(" 命令，一键部署 "),t("a",{attrs:{href:"https://ollama.com/library/deepseek-r1",target:"_blank",rel:"noopener noreferrer"}},[e._v("deepseek-r1 开源模型"),t("OutboundLink")],1),e._v("，默认跑的是 "),t("code",[e._v("deepseek-r1:7b")]),e._v(" 模型。")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("部署完成后，可以在我们系统的 [AI 大模型 -> 控制台 -> API 密钥] 菜单，进行密钥的配置。需要填写“密钥” + “自定义 API URL”（因为让 Spring AI 使用该地址）。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/Ollama-%E5%AF%86%E9%92%A5.png",alt:"私有的密钥配置"}})]),e._v(" "),t("p",[e._v("如果想部署 deepseek 的其它模型，可以搜索 "),t("a",{attrs:{href:"https://ollama.com/search?q=deepseek",target:"_blank",rel:"noopener noreferrer"}},[e._v("deepseek"),t("OutboundLink")],1),e._v(" 文档，执行不同的 "),t("code",[e._v("ollama run")]),e._v(" 命令即可。")]),e._v(" "),t("p",[e._v("注意：使用该方式时，后续配置模型名时，需要使用 "),t("code",[e._v("deepseek-r1")]),e._v(" 而不是 "),t("code",[e._v("deepseek-reasoner")]),e._v("！！！例如说：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/%E9%80%9A%E4%B9%89%E5%8D%83%E9%97%AE-%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B-%E7%A7%81%E6%9C%89.png",alt:"私有的聊天模型"}})]),e._v(" "),t("h3",{attrs:{id:"_1-3-方式三-云厂商部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-方式三-云厂商部署"}},[e._v("#")]),e._v(" 1.3 方式三：云厂商部署")]),e._v(" "),t("p",[e._v("参见「3. 云厂商部署」小节。")]),e._v(" "),t("p",[e._v("一般建议先通过方式一或方式二跑通，再考虑使用方式三哈。")]),e._v(" "),t("h2",{attrs:{id:"_2-模型配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-模型配置"}},[e._v("#")]),e._v(" 2. 模型配置")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("友情提示：")]),e._v(" "),t("p",[e._v("目前 "),t("code",[e._v("ai_model")]),e._v(" 表中，已经预置了一些模型，可以直接使用！！！")])]),e._v(" "),t("h3",{attrs:{id:"_2-1-ai-对话"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ai-对话"}},[e._v("#")]),e._v(" 2.1 AI 对话")]),e._v(" "),t("p",[e._v("使用 "),t("RouterLink",{attrs:{to:"/ai/chat/"}},[e._v("《AI 对话》")]),e._v(" 时，需要在 [AI 大模型 -> 控制台 -> 模型配置] 菜单，配置对应的聊天模型。")],1),e._v(" "),t("p",[e._v("模型有："),t("code",[e._v("deepseek-chat")]),e._v("、"),t("code",[e._v("deepseek-reasoner")]),e._v(" 等等，可通过 "),t("a",{attrs:{href:"https://api-docs.deepseek.com/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[e._v("《DeepSeek 首次调用 API 》"),t("OutboundLink")],1),e._v(" 查看。")]),e._v(" "),t("p",[e._v("注意，每个模型标识的 "),t("code",[e._v("max_tokens")]),e._v("（回复数 Token 数）最大是 8092，具体也是看上述链接。")]),e._v(" "),t("h3",{attrs:{id:"_2-2-ai-绘图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ai-绘图"}},[e._v("#")]),e._v(" 2.2 AI 绘图")]),e._v(" "),t("p",[e._v("TODO 等待 DeepSeek ImageModel 客户端！")]),e._v(" "),t("h2",{attrs:{id:"_3-如何使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-如何使用"}},[e._v("#")]),e._v(" 3. 如何使用？")]),e._v(" "),t("p",[e._v("① 如果你的项目里需要直接通过 "),t("code",[e._v("@Resource")]),e._v(" 注入 DeepSeekChatModel 等对象，需要把 "),t("code",[e._v("application.yaml")]),e._v(" 配置文件里的 "),t("code",[e._v("yudao.ai.deep-seek")]),e._v(" 配置项，替换成你的！")]),e._v(" "),t("div",{staticClass:"language-YAML extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("yudao")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ai")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deep-seek")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("enable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("api-key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" sk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("e94db327cc7d457d99a8de8810fc6b12 "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 你的 API Key")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("model")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" deepseek"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("chat\n")])])]),t("p",[e._v("② 如果你希望使用 [AI 大模型 -> 控制台 -> API 密钥] 菜单的密钥配置，则可以通过 AiModelService 的 "),t("code",[e._v("#getChatModel(...)")]),e._v(" 方法，获取对应的模型对象。")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("① 和 ② 这两者的后续使用，就是标准的 Spring AI 客户端的使用，调用对应的方法即可。")]),e._v(" "),t("p",[e._v("另外，DeepSeekChatModelTests 里有对应的测试用例，可以参考。")]),e._v(" "),t("h2",{attrs:{id:"_4-云厂商部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-云厂商部署"}},[e._v("#")]),e._v(" 4. 云厂商部署")]),e._v(" "),t("p",[e._v("注意，目前如下云厂商，不能返回 think 过程，实际是有 think 的：")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th"),e._v(" "),t("th",[e._v("v3")]),e._v(" "),t("th",[e._v("r1")]),e._v(" "),t("th",[e._v("thinking 是否返回")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("阿里云")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("√")])]),e._v(" "),t("tr",[t("td",[e._v("腾讯云")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("TODO 待 spring ai 修复")])]),e._v(" "),t("tr",[t("td",[e._v("字节火山云")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("TODO 待 spring ai 修复")])]),e._v(" "),t("tr",[t("td",[e._v("百度")]),e._v(" "),t("td",[e._v("TODO 没跑通")]),e._v(" "),t("td",[e._v("TODO 没跑通")]),e._v(" "),t("td",[e._v("TODO 没跑通")])]),e._v(" "),t("tr",[t("td",[e._v("硅基流动")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("√")]),e._v(" "),t("td",[e._v("TODO 待 spring ai 修复")])])])]),e._v(" "),t("p",[e._v("TODO 目前 Spring AI 百度的 SDK 有问题，需要等待修复。")]),e._v(" "),t("p",[e._v("TODO 目前 Spring AI 返回的 "),t("code",[e._v("reasoning_content")]),e._v(" 没有很好的处理，需要在等等 "),t("a",{attrs:{href:"https://github.com/spring-projects/spring-ai/pull/2192",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/spring-projects/spring-ai/pull/2192"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"_4-1-阿里云-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-阿里云-api"}},[e._v("#")]),e._v(" 4.1 阿里云 API")]),e._v(" "),t("p",[e._v("① 参考 "),t("a",{attrs:{href:"/ai/tongyi"}},[e._v("《【模型接入】通义千问》")]),e._v(" 文档，申请阿里云密钥，并配置 API 密钥。")]),e._v(" "),t("p",[e._v("② 配置聊天模型，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/DeepSeek-%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B-%E9%98%BF%E9%87%8C%E4%BA%91.png",alt:"阿里云的聊天模型"}})]),e._v(" "),t("p",[e._v("具体有哪些模型名，可见 "),t("a",{attrs:{href:"https://bailian.console.aliyun.com/#/model-market/detail/deepseek-r1?tabKey=sdk",target:"_blank",rel:"noopener noreferrer"}},[e._v("《阿里云 DeepSeek-R1》"),t("OutboundLink")],1),e._v(" 文档。")]),e._v(" "),t("h3",{attrs:{id:"_4-2-腾讯云-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-腾讯云-api"}},[e._v("#")]),e._v(" 4.2 腾讯云 API")]),e._v(" "),t("p",[e._v("① 参考 "),t("a",{attrs:{href:"https://cloud.tencent.com/document/product/1772/115970",target:"_blank",rel:"noopener noreferrer"}},[e._v("《腾讯云知识引擎原子能力 —— API KEY 管理》"),t("OutboundLink")],1),e._v(" 文档，申请腾讯 API Key，无需配置 API 密钥。")]),e._v(" "),t("p",[e._v("② 配置 API 密钥，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/DeepSeek-%E8%85%BE%E8%AE%AF%E4%BA%91.png",alt:"腾讯云的密钥配置"}})]),e._v(" "),t("p",[e._v("其中，API URL 是 "),t("code",[e._v("https://api.lkeap.cloud.tencent.com")]),e._v(" 。")]),e._v(" "),t("p",[e._v("③ 配置聊天模型，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/DeepSeek-%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B-%E8%85%BE%E8%AE%AF%E4%BA%91.png",alt:"腾讯云的聊天模型"}})]),e._v(" "),t("p",[e._v("具体有哪些模型名，可见 "),t("a",{attrs:{href:"https://cloud.tencent.com/document/product/1772/115969",target:"_blank",rel:"noopener noreferrer"}},[e._v("《腾讯云 DeepSeek-R1》"),t("OutboundLink")],1),e._v(" 文档。")]),e._v(" "),t("h3",{attrs:{id:"_4-3-字节火山云-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-字节火山云-api"}},[e._v("#")]),e._v(" 4.3 字节火山云 API")]),e._v(" "),t("p",[e._v("① 参考 "),t("a",{attrs:{href:"/ai/doubao"}},[e._v("《【模型接入】字节豆包》")]),e._v(" 文档，申请字节密钥，并配置 API 密钥。")]),e._v(" "),t("p",[e._v("② 配置聊天模型，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/DeepSeek-%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B-%E5%AD%97%E8%8A%82.png",alt:"字节的聊天模型"}})]),e._v(" "),t("h3",{attrs:{id:"_4-4-百度-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-百度-api"}},[e._v("#")]),e._v(" 4.4 百度 API")]),e._v(" "),t("p",[e._v("TODO")]),e._v(" "),t("h3",{attrs:{id:"_4-5-硅基流动-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-硅基流动-api"}},[e._v("#")]),e._v(" 4.5 硅基流动 API")]),e._v(" "),t("p",[e._v("① 参考 "),t("a",{attrs:{href:"/ai/siliconflow"}},[e._v("《【模型接入】硅基流动》")]),e._v(" 文档，申请硅基密钥，并配置 API 密钥。")]),e._v(" "),t("p",[e._v("② 配置聊天模型，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/AI%E6%89%8B%E5%86%8C/%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5/DeepSeek-%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B-%E7%A1%85%E5%9F%BA.png",alt:"硅基的聊天模型"}})]),e._v(" "),t("p",[e._v("具体有哪些模型名，可在 "),t("a",{attrs:{href:"https://cloud.siliconflow.cn/models?types=chat",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://cloud.siliconflow.cn/models?types=chat"),t("OutboundLink")],1),e._v(" 搜 “deepseek” 关键字。")])])}),[],!1,null,null,null);t.default=r.exports}}]);