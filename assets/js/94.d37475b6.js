(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{423:function(e,t,r){"use strict";r.r(t);var o=r(7),v=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("前置阅读文章：")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/user-center/"}},[e._v("《用户体系》")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/social-user/"}},[e._v("《三方登录》")])],1)])]),e._v(" "),t("p",[e._v("本文是 "),t("RouterLink",{attrs:{to:"/social-user/"}},[e._v("《三方登录》")]),e._v(" 的延伸，讲解 "),t("a",{attrs:{href:"https://github.com/yudaocode/yudao-mall-uniapp",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("yudao-mall-uniapp")]),t("OutboundLink")],1),e._v(" 商城小程序如何实现微信 "),t("strong",[e._v("小程序")]),e._v(" 码的功能。对应的官方文档如下：")],1),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/qrcode-link/qr-code/getQRCode.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("《【服务端】小程序码》"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"_1-小程序准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-小程序准备"}},[e._v("#")]),e._v(" 1. 小程序准备")]),e._v(" "),t("p",[e._v("在后端 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/qrcode-link/qr-code/getUnlimitedQRCode.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("生成小程序码"),t("OutboundLink")],1),e._v(" 时，需要传递 "),t("code",[e._v("env_version")]),e._v(" 参数，要打开的小程序版本：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("release")]),e._v(" 为正式版为")]),e._v(" "),t("li",[t("code",[e._v("trial")]),e._v(" 为体验版")]),e._v(" "),t("li",[t("code",[e._v("develop")]),e._v(" 为开发版")])]),e._v(" "),t("p",[e._v("因此，在 "),t("code",[e._v("application-${profile}.yaml")]),e._v(" 配置文件中，有对应的 "),t("code",[e._v("yudao.wxa-code.env-version")]),e._v(" 配置项，如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E4%BC%9A%E5%91%98%E6%89%8B%E5%86%8C/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%A0%81/%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE-boot.png",alt:"后端配置"}})]),e._v(" "),t("p",[e._v("一般情况下，如果是开发测试，不用修改，直接使用默认的 "),t("code",[e._v("develop")]),e._v(" 即可。")]),e._v(" "),t("h2",{attrs:{id:"_2-功能演示-代码实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-功能演示-代码实现"}},[e._v("#")]),e._v(" 2. 功能演示 & 代码实现")]),e._v(" "),t("p",[e._v("本小节，我们以【商城】分销的分享二维码为例，演示如何实现小程序码的功能。在开始之前，你需要做如下事情：")]),e._v(" "),t("ul",[t("li",[e._v("参考 "),t("a",{attrs:{href:"/quick-start-front"}},[e._v("《快速启动【前端】》")]),e._v(" 文档，把 "),t("code",[e._v("yudao-uniapp-mall")]),e._v(" 商城项目跑起来，并使用 HBuilderX + 微信开发者工具进行调试")]),e._v(" "),t("li",[e._v("参考 "),t("a",{attrs:{href:"/mall/build"}},[e._v("《商城功能开启》")]),e._v(" 文档，开启商城功能")])]),e._v(" "),t("p",[e._v("点击 uni-app 的【分销中心】，然后点击【邀请海报】按钮，之后点击【生成海报】按钮，即可生成小程序码。如下图所示：")]),e._v(" "),t("p",[t("img",{attrs:{src:"/img/%E4%BC%9A%E5%91%98%E6%89%8B%E5%86%8C/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%A0%81/%E7%94%9F%E6%88%90%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%A0%81.png",alt:"生成小程序码"}})]),e._v(" "),t("p",[e._v("这里，它调用的是 AppSocialUserController 的 "),t("code",[e._v("#getWxaQrcode(...)")]),e._v(" 方法，提供的 HTTP 接口。它的内部，调用 SocialClientApi 的 "),t("code",[e._v("#getWxaQrcode(...)")]),e._v(" 方法，从而调用微信的 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/qrcode-link/qr-code/getUnlimitedQRCode.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("生成小程序码"),t("OutboundLink")],1),e._v(" 接口，生成小程序码。")])])}),[],!1,null,null,null);t.default=v.exports}}]);