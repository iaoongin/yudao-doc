(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{503:function(e,r,a){"use strict";a.r(r);var t=a(7),o=Object(t.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("本章节，讲解自动回复的相关内容，对应 [公众号管理 -> 自动回复] 菜单。如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D/%E7%95%8C%E9%9D%A2.png",alt:"自动回复"}})]),e._v(" "),r("p",[e._v("在用户关注、发送消息时，公众号可以自动回复消息给用户。")]),e._v(" "),r("h2",{attrs:{id:"_1-表结构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-表结构"}},[e._v("#")]),e._v(" 1. 表结构")]),e._v(" "),r("p",[e._v("自动回复对应 "),r("code",[e._v("mp_auto_reply")]),e._v(" 表，结构如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D/%E8%A1%A8%E7%BB%93%E6%9E%84.png",alt:"自动回复表结构"}})]),e._v(" "),r("p",[r("code",[e._v("type")]),e._v(" 字段：回复类型，")]),e._v(" "),r("ul",[r("li",[e._v("1 - 关注回复：用户关注公众号时")]),e._v(" "),r("li",[e._v("3 - 关键字回复：消息类型为文本时，匹配到关键字")]),e._v(" "),r("li",[e._v("2 - 消息回复：没有匹配到关键字时，根据消息类型")])]),e._v(" "),r("h2",{attrs:{id:"_2-自动回复界面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-自动回复界面"}},[e._v("#")]),e._v(" 2. 自动回复界面")]),e._v(" "),r("ul",[r("li",[e._v("前端："),r("a",{attrs:{href:"https://github.com/yudaocode/yudao-ui-admin-vue2/blob/master/src/views/mp/autoReply/index.vue",target:"_blank",rel:"noopener noreferrer"}},[e._v("/@views/mp/autoReply"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("后端："),r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/controller/admin/message/MpAutoReplyController.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("MpAutoReplyController"),r("OutboundLink")],1)])]),e._v(" "),r("h2",{attrs:{id:"_3-关注回复"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-关注回复"}},[e._v("#")]),e._v(" 3. 关注回复")]),e._v(" "),r("p",[e._v("用户关注公众号时，被动回复用户消息，由 "),r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/message/MpAutoReplyServiceImpl.java#L181-L200",target:"_blank",rel:"noopener noreferrer"}},[e._v("MpAutoReplyServiceImpl"),r("OutboundLink")],1),e._v(" 的 "),r("code",[e._v("replyForSubscribe")]),e._v(" 方法来生成回复内容。如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D/%E5%85%B3%E6%B3%A8%E5%9B%9E%E5%A4%8D.png",alt:"关注回复"}})]),e._v(" "),r("h2",{attrs:{id:"_4-消息回复-关键字回复"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-消息回复-关键字回复"}},[e._v("#")]),e._v(" 4. 消息回复 & 关键字回复")]),e._v(" "),r("p",[e._v("用户发送消息给公众号时，自动回复消息给用户，分为两种情况：")]),e._v(" "),r("ul",[r("li",[e._v("关键字回复：消息类型为文本时，匹配到关键字，自动回复消息")]),e._v(" "),r("li",[e._v("消息回复：没有匹配到关键字时，根据消息类型，自动回复消息")])]),e._v(" "),r("p",[e._v("这两种情况，由 "),r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/handler/message/MessageAutoReplyHandler.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("MessageAutoReplyHandler"),r("OutboundLink")],1),e._v(" 调用 "),r("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-module-mp/yudao-module-mp-biz/src/main/java/cn/iocoder/yudao/module/mp/service/message/MpAutoReplyServiceImpl.java#L154-L179",target:"_blank",rel:"noopener noreferrer"}},[e._v("MpAutoReplyServiceImpl"),r("OutboundLink")],1),e._v(" 的 "),r("code",[e._v("replyForMessage")]),e._v(" 方法来生成回复内容。如下图所示：")]),e._v(" "),r("p",[r("img",{attrs:{src:"/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%89%8B%E5%86%8C/%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D/%E6%B6%88%E6%81%AF%E5%9B%9E%E5%A4%8D.png",alt:"消息回复"}})])])}),[],!1,null,null,null);r.default=o.exports}}]);