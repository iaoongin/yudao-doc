(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{517:function(a,t,s){"use strict";s.r(t);var e=s(7),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("本小节，讲解如何将前端 + 后端项目，"),t("strong",[a._v("使用 Docker 容器")]),a._v("，部署到 dev 开发环境下的一台 Linux 服务器上。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/Docker%E9%83%A8%E7%BD%B2/01.png",alt:"Docker 部署"}})]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("注意：服务器的 IP 地址。")]),a._v(" "),t("ul",[t("li",[a._v("外网 IP：139.9.196.247 或 8.154.33.209")]),a._v(" "),t("li",[a._v("内网 IP：192.168.0.213 或 172.26.126.182")])]),a._v(" "),t("p",[a._v("下属所有涉及到 IP 的配置，需要替换成你自己的。")])]),a._v(" "),t("h2",{attrs:{id:"_1-环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-环境准备"}},[a._v("#")]),a._v(" 1. 环境准备")]),a._v(" "),t("p",[a._v("需要安装如下环境：")]),a._v(" "),t("ul",[t("li",[a._v("Docker：容器")]),a._v(" "),t("li",[a._v("MySQL：数据库")]),a._v(" "),t("li",[a._v("Redis：缓存")]),a._v(" "),t("li",[a._v("Nginx：负载均衡")])]),a._v(" "),t("h3",{attrs:{id:"_1-1-安装-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-安装-docker"}},[a._v("#")]),a._v(" 1.1 安装 Docker")]),a._v(" "),t("p",[a._v("执行如下命令，进行 Docker 的安装。参考自 "),t("a",{attrs:{href:"https://help.aliyun.com/zh/ecs/use-cases/install-and-use-docker-on-a-linux-ecs-instance",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://help.aliyun.com/zh/ecs/use-cases/install-and-use-docker-on-a-linux-ecs-instance"),t("OutboundLink")],1),a._v(" 文档。")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ① 运行以下命令，安装 Docker 存储驱动的依赖包")]),a._v("\ndnf "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" device-mapper-persistent-data lvm2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ② 添加稳定的 Docker 软件源")]),a._v("\ndnf config-manager --add-repo"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ③ 检查 Docker 软件源是否已添加")]),a._v("\ndnf list docker-ce\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ④ 安装 Docker")]),a._v("\ndnf "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" docker-ce "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--nobest")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ⑤ 查看 docker 版本信息：返回 Docker version 27.3.1, build ce12230")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ⑥ 启动 Docker 守护进程，并设置开机自启动")]),a._v("\nsystemctl start "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("补充说明：由于访问 Docker 镜像不稳定，一般建议加速访问！！！")]),a._v(" "),t("p",[a._v("问题反馈：")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://t.zsxq.com/sfdMJ",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://t.zsxq.com/sfdMJ"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("可参考加速方式：")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/DaoCloud/public-image-mirror",target:"_blank",rel:"noopener noreferrer"}},[a._v("DaoCloud / public-image-mirror"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/kubesre/docker-registry-mirrors",target:"_blank",rel:"noopener noreferrer"}},[a._v("kubesre / docker-registry-mirrors"),t("OutboundLink")],1)])])]),a._v(" "),t("h3",{attrs:{id:"_1-2-安装-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装-mysql"}},[a._v("#")]),a._v(" 1.2 安装 MySQL")]),a._v(" "),t("h4",{attrs:{id:"第一步-安装-mysql-可选"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步-安装-mysql-可选"}},[a._v("#")]),a._v(" 第一步，安装 MySQL（可选）")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("友情提示：使用 Docker 安装 MySQL 是可选步骤，也可以直接安装 MySQL，或者购买 MySQL 云服务。")])]),a._v(" "),t("p",[a._v("① 执行如下命令，使用 Docker 启动 MySQL 容器。")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /work/mysql/:/var/lib/mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v(":3306 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123456")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mysql "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" m.daocloud.io/docker.io/mysql\n")])])]),t("ul",[t("li",[a._v("数据库文件，挂载到服务器的的 "),t("code",[a._v("/work/mysql/")]),a._v(" 目录下")]),a._v(" "),t("li",[a._v("端口是 3306，密码是 123456")])]),a._v(" "),t("p",[a._v("② 执行 "),t("code",[a._v("ls /work/mysql")]),a._v(" 命令，查看 "),t("code",[a._v("/work/mysql/")]),a._v(" 目录的数据库文件。")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/Docker%E9%83%A8%E7%BD%B2/03.png",alt:"数据库文件"}})]),a._v(" "),t("h4",{attrs:{id:"第二步-导入-sql-脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步-导入-sql-脚本"}},[a._v("#")]),a._v(" 第二步，导入 SQL 脚本")]),a._v(" "),t("p",[a._v("创建一个名字为 "),t("code",[a._v("ruoyi-vue-pro")]),a._v(" 数据库，执行数据库对应的 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/tree/master/sql",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("sql")]),t("OutboundLink")],1),a._v(" 目录下的 SQL 文件，进行初始化。")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/Docker%E9%83%A8%E7%BD%B2/02.png",alt:"使用 Navicat 导入 SQL 脚本"}})]),a._v(" "),t("h3",{attrs:{id:"_1-3-安装-redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-安装-redis"}},[a._v("#")]),a._v(" 1.3 安装 Redis")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("友情提示：使用 Docker 安装 Redis 是可选步骤，也可以直接安装 Redis，或者购买 Redis 云服务。")])]),a._v(" "),t("p",[a._v("执行如下命令，使用 Docker 启动 Redis 容器。")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" redis "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v(":6379 m.daocloud.io/docker.io/redis\n")])])]),t("ul",[t("li",[a._v("端口是 6379，密码未设置")])]),a._v(" "),t("h3",{attrs:{id:"_1-4-安装-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-安装-nginx"}},[a._v("#")]),a._v(" 1.4 安装 Nginx")]),a._v(" "),t("h4",{attrs:{id:"第一步-创建挂载目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步-创建挂载目录"}},[a._v("#")]),a._v(" 第一步，创建挂载目录")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("Nginx 挂载到服务器的目录：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("/work/nginx/conf.d")]),a._v(" 用于存放配置文件")]),a._v(" "),t("li",[t("code",[a._v("/work/nginx/html")]),a._v(" 用于存放网页文件")]),a._v(" "),t("li",[t("code",[a._v("/work/nginx/logs")]),a._v(" 用于存放日志")]),a._v(" "),t("li",[t("code",[a._v("/work/nginx/cert")]),a._v(" 用于存放 HTTPS 证书")])])]),a._v(" "),t("p",[a._v("创建 "),t("code",[a._v("/work/nginx")]),a._v(" 目录，并在该目录下新建 "),t("code",[a._v("nginx.conf")]),a._v(" 文件，避免稍后安装 Nginx 报错。内容如下：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("user  nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nworker_processes  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nevents "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    worker_connections  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nerror_log  /var/log/nginx/error.log warn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\npid        /var/run/nginx.pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nhttp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    include       /etc/nginx/mime.types"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    default_type  application/octet-stream"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    sendfile        on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    keepalive_timeout  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("65")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    log_format  main  "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),a._v("\n                      "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'$status $body_bytes_sent \"$http_referer\" '")]),a._v("\n                      "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#    access_log  /var/log/nginx/access.log  main;")]),a._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("gzip")]),a._v(" on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    gzip_min_length 1k"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置允许压缩的页面最小字节数")]),a._v("\n    gzip_buffers "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" 16k"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用来存储 gzip 的压缩结果")]),a._v("\n    gzip_http_version "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 识别 HTTP 协议版本")]),a._v("\n    gzip_comp_level "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置 gzip 的压缩比 1-9。1 压缩比最小但最快，而 9 相反")]),a._v("\n    gzip_types text/plain application/x-javascript text/css application/xml application/javascript"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定压缩类型")]),a._v("\n    gzip_proxied any"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 无论后端服务器的 headers 头返回什么信息，都无条件启用压缩")]),a._v("\n\n    include /etc/nginx/conf.d/*.conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 加载该目录下的其它 Nginx 配置文件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h4",{attrs:{id:"启动-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-nginx"}},[a._v("#")]),a._v(" 启动 Nginx")]),a._v(" "),t("p",[a._v("① 执行如下命令，使用 Docker 启动 Nginx 容器。")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(":443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TZ=Asia/Shanghai"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /work/nginx/nginx.conf:/etc/nginx/nginx.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /work/nginx/conf.d:/etc/nginx/conf.d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /work/nginx/logs:/var/log/nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /work/nginx/cert:/etc/nginx/cert "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /work/nginx/html:/usr/share/nginx/html "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nm.daocloud.io/docker.io/nginx\n")])])]),t("p",[a._v("② 执行 "),t("code",[a._v("docker ps")]),a._v(" 命令，查看到 Nginx 容器的状态是 "),t("code",[a._v("UP")]),a._v(" 的。")]),a._v(" "),t("h2",{attrs:{id:"_2-部署后端服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署后端服务"}},[a._v("#")]),a._v(" 2. 部署后端服务")]),a._v(" "),t("h4",{attrs:{id:"第一步-修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步-修改配置"}},[a._v("#")]),a._v(" 第一步，修改配置")]),a._v(" "),t("p",[a._v("后端 dev 开发环境对应的是 "),t("a",{attrs:{href:"https://github.com/YunaiV/ruoyi-vue-pro/blob/master/yudao-server/src/main/resources/application-dev.yaml",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("application-dev.yaml")]),t("OutboundLink")],1),a._v(" 配置文件，主要是修改 MySQL 和 Redis 为你的地址。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/03.png",alt:" 配置文件"}})]),a._v(" "),t("h4",{attrs:{id:"第二步-编译后端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步-编译后端"}},[a._v("#")]),a._v(" 第二步，编译后端")]),a._v(" "),t("p",[a._v("在项目的根目录下，执行 "),t("code",[a._v("mvn clean package -Dmaven.test.skip=true")]),a._v(" 命令，编译后端项目，构建出它的 Jar 包。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/02.png",alt:"编译后端"}})]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("疑问：-Dmaven.test.skip=true 是什么意思？")]),a._v(" "),t("p",[a._v("跳过单元测试的执行。如果你项目的单元测试写的不错，建议使用 "),t("code",[a._v("mvn clean package")]),a._v(" 命令，执行单元测试，保证交付的质量。")])]),a._v(" "),t("h4",{attrs:{id:"第三步-上传-jar-包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步-上传-jar-包"}},[a._v("#")]),a._v(" 第三步，上传 Jar 包")]),a._v(" "),t("p",[a._v("在 Linux 服务器上创建 "),t("code",[a._v("/work/projects/yudao-server")]),a._v(" 目录，使用 "),t("code",[a._v("scp")]),a._v(" 命令或者 FTP 工具，将 "),t("code",[a._v("yudao-server.jar")]),a._v(" 上传到该目录下。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/04.png",alt:"上传 Jar 包"}})]),a._v(" "),t("h4",{attrs:{id:"第四步-构建镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第四步-构建镜像"}},[a._v("#")]),a._v(" 第四步，构建镜像")]),a._v(" "),t("p",[a._v("① 在 "),t("code",[a._v("/work/projects/yudao-server")]),a._v(" 目录下，新建 Dockerfile 文件，用于制作后端项目的 Docker 镜像。编写内容如下：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## AdoptOpenJDK 停止发布 OpenJDK 二进制，而 Eclipse Temurin 是它的延伸，提供更好的稳定性")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 感谢复旦核博士的建议！灰子哥，牛皮！")]),a._v("\nFROM m.daocloud.io/docker.io/eclipse-temurin:8-jre\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 创建目录，并使用它作为工作目录")]),a._v("\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /yudao-server\nWORKDIR /yudao-server\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 将后端项目的 Jar 文件，复制到镜像中")]),a._v("\nCOPY yudao-server.jar app.jar\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 设置 TZ 时区")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('## 设置 JAVA_OPTS 环境变量，可通过 docker run -e "JAVA_OPTS=" 进行覆盖')]),a._v("\nENV "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("TZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Asia/Shanghai "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-Xms512m -Xmx512m"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 暴露后端项目的 48080 端口")]),a._v("\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("48080")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 启动后端项目")]),a._v("\nENTRYPOINT "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${JAVA_OPTS}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Djava.security.egd")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("file:/dev/./urandom "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" app.jar\n")])])]),t("p",[a._v("② 执行如下命令，构建名字为 "),t("code",[a._v("yudao-server")]),a._v(" 的 Docker 镜像。")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /work/projects/yudao-server\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" yudao-server "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),t("p",[a._v("③ 在 "),t("code",[a._v("/work/projects/yudao-server")]),a._v(" 目录下，新建 Shell 脚本 "),t("code",[a._v("deploy.sh")]),a._v("，使用 Docker 启动后端项目。编写内容如下：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 第一步：删除可能启动的老 yudao-server 容器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"开始删除 yudao-server 容器"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop yudao-server "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" yudao-server "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"完成删除 yudao-server 容器"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 第二步：启动新的 yudao-server 容器 \\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"开始启动 yudao-server 容器"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" yudao-server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("48080")]),a._v(":48080 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"SPRING_PROFILES_ACTIVE=dev"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /work/projects/yudao-server:/root/logs/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nyudao-server\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"正在启动 yudao-server 容器中，需要等待 60 秒左右"')]),a._v("\n")])])]),t("ul",[t("li",[a._v("应用日志文件，挂载到服务器的的 "),t("code",[a._v("/work/projects/yudao-server")]),a._v(" 目录下")]),a._v(" "),t("li",[a._v("通过 "),t("code",[a._v("SPRING_PROFILES_ACTIVE")]),a._v(" 设置为 "),t("code",[a._v("dev")]),a._v(" 开发环境")])]),a._v(" "),t("h4",{attrs:{id:"第五步-启动后端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第五步-启动后端"}},[a._v("#")]),a._v(" 第五步，启动后端")]),a._v(" "),t("p",[a._v("① 执行 "),t("code",[a._v("sh deploy.sh")]),a._v(" 命令，使用 Docker 启动后端项目。日志如下：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("开始删除 yudao-server 容器\nyudao-server\nyudao-server\n完成删除 yudao-server 容器\n开始启动 yudao-server 容器\n0dfd3dc409a53ae6b5e7c5662602cf5dcb52fd4d7f673bd74af7d21da8ead9d5\n正在启动 yudao-server 容器中，需要等待 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("60")]),a._v(" 秒左右\n")])])]),t("p",[a._v("② 执行 "),t("code",[a._v("docker logs yudao-server")]),a._v(" 命令，查看启动日志。看到如下内容，说明启动完成：")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("友情提示：如果日志比较多，可以使用 grep 进行过滤。")]),a._v(" "),t("p",[a._v("例如说：使用 "),t("code",[a._v("docker logs yudao-server | grep 48080")])])]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2022")]),a._v("-04-15 00:34:19.647  INFO "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" --- "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("TID: N/A"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" o.s.b.w.embedded.tomcat.TomcatWebServer  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" Tomcat initialized with port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("48080")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("h2",{attrs:{id:"_3-部署前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-部署前端"}},[a._v("#")]),a._v(" 3. 部署前端")]),a._v(" "),t("p",[a._v("项目的管理后台有 3 个版本（只需要看你的版本即可）：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("yudao-ui-admin-vue3")]),a._v("：基于 Vue3 + element-plus")]),a._v(" "),t("li",[t("code",[a._v("yudao-ui-admin-vben")]),a._v("：基于 Vue3 + vben5.0(ant-design-vue)")]),a._v(" "),t("li",[t("code",[a._v("yudao-ui-admin-vue2")]),a._v("：基于 Vue2 + element-ui")])]),a._v(" "),t("p",[a._v("注意，前端无法直接启动，而是需要通过 Nginx 转发读取前端构建出来的静态文件，最终都放在服务器上的 "),t("code",[a._v("/work/projects/yudao-ui-admin")]),a._v(" 目录下。")]),a._v(" "),t("h3",{attrs:{id:"_3-1-yudao-ui-admin-vue3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-yudao-ui-admin-vue3"}},[a._v("#")]),a._v(" 3.1 yudao-ui-admin-vue3")]),a._v(" "),t("p",[a._v("基于 Vue3 + element-plus")]),a._v(" "),t("h4",{attrs:{id:"第一步-修改配置-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步-修改配置-2"}},[a._v("#")]),a._v(" 第一步，修改配置")]),a._v(" "),t("p",[a._v("前端 dev 开发环境对应的是 "),t("a",{attrs:{href:"https://github.com/yudaocode/yudao-ui-admin-vue3/blob/master/.env.dev#L6-L7",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v(".env.dev")]),t("OutboundLink")],1),a._v(" 配置文件，主要是修改 "),t("code",[a._v("VITE_BASE_URL")]),a._v(" 为你的后端项目的访问地址。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/ep-env.png",alt:" 配置文件"}})]),a._v(" "),t("h4",{attrs:{id:"第二步-编译前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步-编译前端"}},[a._v("#")]),a._v(" 第二步，编译前端")]),a._v(" "),t("p",[a._v("在前端项目的根目录下，执行 "),t("code",[a._v("npm run build:dev")]),a._v(" 命令，编译前端项目，构建出它的 "),t("code",[a._v("dist")]),a._v(" 文件，里面是 HTML、CSS、JavaScript 等静态文件。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/ep-%E7%BC%96%E8%AF%91.png",alt:"编译前端"}})]),a._v(" "),t("p",[a._v("如下想要打包其它环境，可使用如下命令：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build:prod "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 打包 prod 生产环境")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build:stage "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 打包 stage 预发布环境")]),a._v("\n")])])]),t("p",[a._v("如果是在服务器上构建，并且出现卡死的情况，可以参考 "),t("a",{attrs:{href:"https://t.zsxq.com/Quq1U",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://t.zsxq.com/Quq1U"),t("OutboundLink")],1),a._v(" 或 "),t("a",{attrs:{href:"https://gitee.com/yudaocode/yudao-ui-admin-vue3/issues/IAU0T3",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://gitee.com/yudaocode/yudao-ui-admin-vue3/issues/IAU0T3"),t("OutboundLink")],1),a._v(" 解决")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("其它高级参数说明【可暂时不看】：")]),a._v(" "),t("p",[a._v("① "),t("code",[a._v("VITE_PUBLIC_PATH")]),a._v("：前端打包的路径（静态资源的基础路径），一般默认为 "),t("code",[a._v("/")]),a._v(" 即可。目前有两种用法：")]),a._v(" "),t("p",[a._v("第一种，可用于二级目录部署。例如说，"),t("code",[a._v("VITE_PUBLIC_PATH")]),a._v(" 设置为 "),t("code",[a._v("/demo")]),a._v(" 。然后 Nginx 配置时，需要特殊注意，如下所示：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("        location /demo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意点 1：不需要 / 结尾")]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意点 2：二级路由时需要使用别名 alias，不用 root")]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("alias")]),a._v("   /work/projects/yudao-ui-admin/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意点 3：需要 / 结尾")]),a._v("\n            index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("第二种，可用于七牛等 CDN 服务，读取前端的静态文件，提升访问速度，建议 prod 生产环境使用。例如说，我们演示环境的 "),t("code",[a._v("VITE_PUBLIC_PATH")]),a._v(" 是 "),t("code",[a._v("http://static-vue3.yudao.iocoder.cn/")]),a._v(" 。")]),a._v(" "),t("p",[a._v("具体操作，可参考文章的 "),t("a",{attrs:{href:"https://blog.csdn.net/weixin_71403100/article/details/132037721",target:"_blank",rel:"noopener noreferrer"}},[a._v("《Vue 项目使用七牛云 CDN 存放静态资源》"),t("OutboundLink")],1),a._v(" 的「二、实现方式 」部分，只是最终的“修改 index.html 中静态资源引用”，变成 "),t("code",[a._v("PUBLIC_PATH")]),a._v(" 修改即可。")])]),a._v(" "),t("h4",{attrs:{id:"第三步-上传-dist-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步-上传-dist-文件"}},[a._v("#")]),a._v(" 第三步，上传 "),t("code",[a._v("dist")]),a._v(" 文件")]),a._v(" "),t("p",[a._v("在 Linux 服务器上创建 "),t("code",[a._v("/work/projects/yudao-ui-admin")]),a._v(" 目录，使用 "),t("code",[a._v("scp")]),a._v(" 命令或者 FTP 工具，将 "),t("code",[a._v("dist")]),a._v(" 上传到该目录下。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/ep-dist.png",alt:"上传  文件"}})]),a._v(" "),t("h3",{attrs:{id:"_3-2-yudao-ui-admin-vben"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-yudao-ui-admin-vben"}},[a._v("#")]),a._v(" 3.2 yudao-ui-admin-vben")]),a._v(" "),t("p",[a._v("基于 Vue3 + vben5.0(ant-design-vue)")]),a._v(" "),t("h4",{attrs:{id:"第一步-修改配置-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步-修改配置-3"}},[a._v("#")]),a._v(" 第一步，修改配置")]),a._v(" "),t("p",[a._v("前端 production 开发环境对应的是 "),t("a",{attrs:{href:"https://github.com/yudaocode/yudao-ui-admin-vben/blob/master/.env.production#L15-L21",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v(".env.production")]),t("OutboundLink")],1),a._v(" 配置文件，主要是修改 "),t("code",[a._v("VITE_GLOB_BASE_URL")]),a._v("、"),t("code",[a._v("VITE_GLOB_API_URL")]),a._v(" 为你的后端项目的访问地址。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/vben-env.png",alt:" 配置文件"}})]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("其它高级参数说明【可暂时不看】：")]),a._v(" "),t("p",[a._v("① "),t("code",[a._v("VITE_PUBLIC_PATH")]),a._v("：前端打包的路径（静态资源的基础路径），一般默认为 "),t("code",[a._v("/")]),a._v(" 即可。目前有两种用法：")]),a._v(" "),t("p",[a._v("第一种，可用于二级目录部署。例如说，"),t("code",[a._v("VITE_PUBLIC_PATH")]),a._v(" 设置为 "),t("code",[a._v("/demo")]),a._v(" 。然后 Nginx 配置时，需要特殊注意，如下所示：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("        location /demo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意点 1：不需要 / 结尾")]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意点 2：二级路由时需要使用别名 alias，不用 root")]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("alias")]),a._v("   /work/projects/yudao-ui-admin/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意点 3：需要 / 结尾")]),a._v("\n            index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n            try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("第二种，可用于七牛等 CDN 服务，读取前端的静态文件，提升访问速度，建议 prod 生产环境使用。例如说，我们演示环境的 "),t("code",[a._v("VITE_PUBLIC_PATH")]),a._v(" 是 "),t("code",[a._v("http://static-vue3.yudao.iocoder.cn/")]),a._v(" 。")]),a._v(" "),t("p",[a._v("具体操作，可参考文章的 "),t("a",{attrs:{href:"https://blog.csdn.net/weixin_71403100/article/details/132037721",target:"_blank",rel:"noopener noreferrer"}},[a._v("《Vue 项目使用七牛云 CDN 存放静态资源》"),t("OutboundLink")],1),a._v(" 的「二、实现方式 」部分，只是最终的“修改 index.html 中静态资源引用”，变成 "),t("code",[a._v("PUBLIC_PATH")]),a._v(" 修改即可。")])]),a._v(" "),t("h4",{attrs:{id:"第二步-编译前端-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步-编译前端-2"}},[a._v("#")]),a._v(" 第二步，编译前端")]),a._v(" "),t("p",[a._v("在前端项目的根目录下，执行 "),t("code",[a._v("npm run build")]),a._v(" 命令，编译前端项目，构建出它的 "),t("code",[a._v("dist")]),a._v(" 文件，里面是 HTML、CSS、JavaScript 等静态文件。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/vben-%E7%BC%96%E8%AF%91.png",alt:"编译前端"}})]),a._v(" "),t("h4",{attrs:{id:"第三步-上传-dist-文件-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步-上传-dist-文件-2"}},[a._v("#")]),a._v(" 第三步，上传 "),t("code",[a._v("dist")]),a._v(" 文件")]),a._v(" "),t("p",[a._v("在 Linux 服务器上创建 "),t("code",[a._v("/work/projects/yudao-ui-admin")]),a._v(" 目录，使用 "),t("code",[a._v("scp")]),a._v(" 命令或者 FTP 工具，将 "),t("code",[a._v("dist")]),a._v(" 上传到该目录下。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/vben-dist.png",alt:"上传  文件"}})]),a._v(" "),t("h3",{attrs:{id:"_4-3-yudao-ui-admin-vue2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-yudao-ui-admin-vue2"}},[a._v("#")]),a._v(" 4.3 yudao-ui-admin-vue2")]),a._v(" "),t("p",[a._v("基于 Vue2 + element-ui")]),a._v(" "),t("h4",{attrs:{id:"第一步-修改配置-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一步-修改配置-4"}},[a._v("#")]),a._v(" 第一步，修改配置")]),a._v(" "),t("p",[a._v("前端 dev 开发环境对应的是 "),t("a",{attrs:{href:"https://github.com/yudaocode/yudao-ui-admin-vue2/blob/master/.env.dev",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v(".env.dev")]),t("OutboundLink")],1),a._v(" 配置文件，主要是修改 "),t("code",[a._v("VUE_APP_BASE_API")]),a._v(" 为你的后端项目的访问地址。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/eu-env.png",alt:" 配置文件"}})]),a._v(" "),t("h4",{attrs:{id:"第二步-编译前端-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二步-编译前端-3"}},[a._v("#")]),a._v(" 第二步，编译前端")]),a._v(" "),t("p",[a._v("在前端项目的根目录下，执行 "),t("code",[a._v("npm run build:dev")]),a._v(" 命令，编译前端项目，构建出它的 "),t("code",[a._v("dist")]),a._v(" 文件，里面是 HTML、CSS、JavaScript 等静态文件。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/eu-%E7%BC%96%E8%AF%91.png",alt:"编译前端"}})]),a._v(" "),t("p",[a._v("如下想要打包其它环境，可使用如下命令：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build:prod "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 打包 prod 生产环境")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build:stage "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 打包 stage 预发布环境")]),a._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("其它高级参数说明【可暂时不看】：")]),a._v(" "),t("p",[a._v("① "),t("code",[a._v("PUBLIC_PATH")]),a._v("：可用于七牛等 CDN 服务，读取前端的静态文件，提升访问速度，建议 prod 生产环境使用。示例如下：")]),a._v(" "),t("p",[a._v("可参考文章的 "),t("a",{attrs:{href:"https://blog.csdn.net/weixin_71403100/article/details/132037721",target:"_blank",rel:"noopener noreferrer"}},[a._v("《Vue 项目使用七牛云 CDN 存放静态资源》"),t("OutboundLink")],1),a._v(" 的「二、实现方式 」部分，只是最终的“修改 index.html 中静态资源引用”，变成 "),t("code",[a._v("PUBLIC_PATH")]),a._v(" 修改即可。")]),a._v(" "),t("p",[a._v("② "),t("code",[a._v("VUE_APP_APP_NAME")]),a._v("：二级部署路径，默认为 "),t("code",[a._v("/")]),a._v(" 根目录，一般不用修改。")]),a._v(" "),t("p",[a._v("③ "),t("code",[a._v("mode")]),a._v("：前端路由的模式，默认采用 "),t("code",[a._v("history")]),a._v(" 路由，一般不用修改。可以通过修改 "),t("a",{attrs:{href:"https://github.com/yudaocode/yudao-ui-admin-vue2/blob/master/src/router/index.js#L173-L178",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("router/index.js")]),t("OutboundLink")],1),a._v(" 来设置为 "),t("code",[a._v("hash")]),a._v(" 路由，示例如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/eu-mode.png",alt:" 参数"}})])]),a._v(" "),t("h4",{attrs:{id:"第三步-上传-dist-文件-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三步-上传-dist-文件-3"}},[a._v("#")]),a._v(" 第三步，上传 "),t("code",[a._v("dist")]),a._v(" 文件")]),a._v(" "),t("p",[a._v("在 Linux 服务器上创建 "),t("code",[a._v("/work/projects/yudao-ui-admin")]),a._v(" 目录，使用 "),t("code",[a._v("scp")]),a._v(" 命令或者 FTP 工具，将 "),t("code",[a._v("dist")]),a._v(" 上传到该目录下。如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/eu-dist.png",alt:"上传  文件"}})]),a._v(" "),t("h2",{attrs:{id:"_4-配置-nginx-转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置-nginx-转发"}},[a._v("#")]),a._v(" 4. 配置 Nginx 转发")]),a._v(" "),t("p",[a._v("两种 Nginx 的配置，分别满足服务器 IP、独立域名的不同场景。")]),a._v(" "),t("h3",{attrs:{id:"_4-1-方式一-服务器-ip-访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-方式一-服务器-ip-访问"}},[a._v("#")]),a._v(" 4.1 方式一：服务器 IP 访问")]),a._v(" "),t("p",[a._v("① 在 "),t("code",[a._v("/work/nginx/conf.d")]),a._v(" 目录下，创建 "),t("code",[a._v("ruoyi-vue-pro.conf")]),a._v("，内容如下：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    server_name  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("139.9")]),a._v(".196.247"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 重要！！！修改成你的外网 IP/域名")]),a._v("\n\n    location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 前端项目")]),a._v("\n        root   /usr/share/nginx/html/yudao-admin-ui"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    location /admin-api/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 后端项目 - 管理后台")]),a._v("\n        proxy_pass http://192.168.0.213:48080/admin-api/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP")]),a._v("\n        proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Real-IP "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header REMOTE-HOST "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Forwarded-For "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    location /app-api/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 后端项目 - 用户 App")]),a._v("\n        proxy_pass http://192.168.0.213:48080/app-api/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP")]),a._v("\n        proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Real-IP "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header REMOTE-HOST "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Forwarded-For "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("友情提示：")]),a._v(" "),t("p",[t("code",[a._v("[root]")]),a._v(" 指令在本地文件时，要使用 Nginx Docker 容器内的路径，即 "),t("code",[a._v("/usr/share/nginx/html/yudao-admin-ui")]),a._v("，否则会报 404 的错误。")])]),a._v(" "),t("p",[a._v("② 执行 "),t("code",[a._v("docker exec nginx nginx -s reload")]),a._v(" 命令，重新加载 Nginx 配置。")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("友情提示：如果你担心 Nginx 配置不正确，可以执行 docker exec nginx nginx -t 命令。")])]),a._v(" "),t("p",[a._v("③ 执行 "),t("code",[a._v("curl http://192.168.0.213/admin-api/")]),a._v(" 命令，成功访问后端项目的内网地址，返回结果如下：")]),a._v(" "),t("div",{staticClass:"language-JSON extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("401")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"data"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token null keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"msg"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"账号未登录"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("执行 "),t("code",[a._v("curl http://139.9.196.247:48080/admin-api/")]),a._v(" 命令，成功访问后端项目的外网地址，返回结果一致。")]),a._v(" "),t("p",[a._v("④ 请求 "),t("a",{attrs:{href:"http://139.9.196.247:48080",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://139.9.196.247:48080"),t("OutboundLink")],1),a._v(" 地址，成功访问前端项目的外网地址，，返回前端界面如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/Docker%E9%83%A8%E7%BD%B2/06.png",alt:"前端界面"}})]),a._v(" "),t("p",[a._v("⑤ 如果你使用到 WebSocket 的话，需要额外对 "),t("code",[a._v("/infra/ws")]),a._v(" 路径进行配置，具体可见 "),t("a",{attrs:{href:"https://t.zsxq.com/LQEfC",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://t.zsxq.com/LQEfC"),t("OutboundLink")],1),a._v(" 链接。")]),a._v(" "),t("h3",{attrs:{id:"_4-2-方式二-独立域名访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-方式二-独立域名访问"}},[a._v("#")]),a._v(" 4.2 方式二：独立域名访问")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("友情提示：在前端项目的编译时，需要把 `VUE_APP_BASE_API` 修改为后端项目对应的域名。")]),a._v(" "),t("p",[a._v("例如说，这里使用的是 "),t("code",[a._v("http://api.iocoder.cn")])])]),a._v(" "),t("p",[a._v("① 在 "),t("code",[a._v("/work/nginx/conf.d")]),a._v(" 目录下，创建 "),t("code",[a._v("ruoyi-vue-pro2.conf")]),a._v("，内容如下：")]),a._v(" "),t("div",{staticClass:"language-Bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 前端项目")]),a._v("\n    listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    server_name  admin.iocoder.cn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 重要！！！修改成你的前端域名")]),a._v("\n\n    location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 前端项目")]),a._v("\n        root   /usr/share/nginx/html/yudao-admin-ui"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nserver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 后端项目")]),a._v("\n    listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    server_name  api.iocoder.cn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 重要！！！修改成你的外网 IP/域名")]),a._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 不要使用 location / 转发到后端项目，因为 druid、admin 等监控，不需要外网可访问。或者增加 Nginx IP 白名单限制也可以。")]),a._v("\n\n    location /admin-api/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 后端项目 - 管理后台")]),a._v("\n        proxy_pass http://192.168.0.213:48080/admin-api/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP")]),a._v("\n        proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Real-IP "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header REMOTE-HOST "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Forwarded-For "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    location /app-api/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 后端项目 - 用户 App")]),a._v("\n        proxy_pass http://192.168.0.213:48080/app-api/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP")]),a._v("\n        proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$http_host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Real-IP "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header REMOTE-HOST "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header X-Forwarded-For "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("② 执行 "),t("code",[a._v("docker exec nginx nginx -s reload")]),a._v(" 命令，重新加载 Nginx 配置。")]),a._v(" "),t("p",[a._v("③ 请求 "),t("a",{attrs:{href:"http://api.iocoder.cn/admin-api/",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://api.iocoder.cn/admin-api/"),t("OutboundLink")],1),a._v(" 地址，成功访问后端项目，返回结果如下：")]),a._v(" "),t("div",{staticClass:"language-JSON extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("401")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"data"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token null keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"msg"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"账号未登录"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("④ 请求 "),t("a",{attrs:{href:"http://admin.iocoder.cn",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://admin.iocoder.cn"),t("OutboundLink")],1),a._v(" 地址，成功访问前端项目，返回前端界面如下：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/img/%E8%BF%90%E7%BB%B4%E6%89%8B%E5%86%8C/Linux%E9%83%A8%E7%BD%B2/15.png",alt:"前端界面"}})]),a._v(" "),t("h2",{attrs:{id:"_666-更多说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_666-更多说明"}},[a._v("#")]),a._v(" 666. 更多说明")]),a._v(" "),t("p",[a._v("① 积木报表菜单，无法访问。参考 "),t("a",{attrs:{href:"https://t.zsxq.com/vBkup",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://t.zsxq.com/vBkup"),t("OutboundLink")],1),a._v(" 解决。")]),a._v(" "),t("p",[a._v("② 如果希望分离 Maven 依赖 lib 打包，可参考 "),t("a",{attrs:{href:"https://gitee.com/zhijiantianya/ruoyi-vue-pro/pulls/1259/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://gitee.com/zhijiantianya/ruoyi-vue-pro/pulls/1259/"),t("OutboundLink")],1),a._v(" 贡献。")])])}),[],!1,null,null,null);t.default=n.exports}}]);